import{f as ce,a as Y,t as Fe,c as Ue}from"../chunks/orPc_v2v.js";import{i as Ot}from"../chunks/BhZRt-tU.js";import{o as Wt}from"../chunks/Yfj7m08U.js";import{e as Kt,I as sr,aN as Yt,Q as vt,h as Ee,a7 as or,J as lr,w as e,X as ur,M as fr,O as cr,P as Pt,R as pt,i as Ve,ad as dr,aG as hr,f as kt,s as vr,aO as dt,aP as ht,c as We,aq as Ft,aJ as G,ai as $t,aE as Vt,aQ as pr,r as Gt,p as _r,aR as gr,aS as _t,q as Qt,d as Jt,aT as mr,ae as br,aU as yr,aD as kr,aV as wr,_ as Xt,K as Er,aW as xr,aX as Rr,S as Sr,o as be,aY as Or,ay as It,aZ as Ir,n as Ge,a_ as Tr,a$ as Cr,b0 as Ar,aL as Dr,T as Lr,b1 as Mr,b2 as Pr,B as Ze,Z as I,b3 as Ce,x as $e,b4 as Tt,C as Ae,F as Z,H as X,G as W,D as ue,E as et,aK as lt,Y as ut,aM as He,b5 as ft,b6 as gt,b7 as we}from"../chunks/DWqn5dwp.js";import{a as Fr,d as Ct,e as it,s as he}from"../chunks/CsynBPB-.js";import{p as Re,b as wt,i as me}from"../chunks/CEA2epAF.js";import{s as Xe,r as jt}from"../chunks/Cxcvyh6e.js";import{w as At}from"../chunks/aubgiY8R.js";function Le(n,i){return i}function $r(n,i,o){for(var l=n.items,_=[],h=i.length,v=0;v<h;v++)yr(i[v].e,_,!0);var R=h>0&&_.length===0&&o!==null;if(R){var j=o.parentNode;kr(j),j.append(o),l.clear(),Te(n,i[0].prev,i[h-1].next)}wr(_,()=>{for(var f=0;f<h;f++){var E=i[f];R||(l.delete(E.k),Te(n,E.prev,E.next)),Jt(E.e,!R)}})}function Se(n,i,o,l,_,h=null){var v=n,R={flags:i,items:new Map,first:null},j=(i&Yt)!==0;if(j){var f=n;v=Ee?vt(or(f)):f.appendChild(Kt())}Ee&&lr();var E=null,B=!1,C=new Map,F=ur(()=>{var T=o();return pr(T)?T:T==null?[]:Vt(T)}),u,m;function c(){jr(m,u,R,C,v,_,i,l,o),h!==null&&(u.length===0?E?Gt(E):E=kt(()=>h(v)):E!==null&&_r(E,()=>{E=null}))}sr(()=>{m??=Xt,u=e(F);var T=u.length;if(B&&T===0)return;B=T===0;let z=!1;if(Ee){var Q=fr(v)===cr;Q!==(T===0)&&(v=Pt(),vt(v),pt(!1),z=!0)}if(Ee){for(var ee=null,q,S=0;S<T;S++){if(Ve.nodeType===dr&&Ve.data===hr){v=Ve,z=!0,pt(!1);break}var x=u[S],t=l(x,S);q=Et(Ve,R,ee,null,x,t,S,_,i,o),R.items.set(t,q),ee=q}T>0&&vt(Pt())}if(Ee)T===0&&h&&(E=kt(()=>h(v)));else if(vr()){var r=new Set,s=We;for(S=0;S<T;S+=1){x=u[S],t=l(x,S);var p=R.items.get(t)??C.get(t);p?(i&(dt|ht))!==0&&Zt(p,x,S,i):(q=Et(null,R,null,null,x,t,S,_,i,o,!0),C.set(t,q)),r.add(t)}for(const[d,P]of R.items)r.has(d)||s.skipped_effects.add(P.e);s.oncommit(c)}else c();z&&pt(!0),e(F)}),Ee&&(v=Ve)}function jr(n,i,o,l,_,h,v,R,j){var f=(v&mr)!==0,E=(v&(dt|ht))!==0,B=i.length,C=o.items,F=o.first,u=F,m,c=null,T,z=[],Q=[],ee,q,S,x;if(f)for(x=0;x<B;x+=1)ee=i[x],q=R(ee,x),S=C.get(q),S!==void 0&&(S.a?.measure(),(T??=new Set).add(S));for(x=0;x<B;x+=1){if(ee=i[x],q=R(ee,x),S=C.get(q),S===void 0){var t=l.get(q);if(t!==void 0){l.delete(q),C.set(q,t);var r=c?c.next:u;Te(o,c,t),Te(o,t,r),mt(t,r,_),c=t}else{var s=u?u.e.nodes_start:_;c=Et(s,o,c,c===null?o.first:c.next,ee,q,x,h,v,j)}C.set(q,c),z=[],Q=[],u=c.next;continue}if(E&&Zt(S,ee,x,v),(S.e.f&_t)!==0&&(Gt(S.e),f&&(S.a?.unfix(),(T??=new Set).delete(S))),S!==u){if(m!==void 0&&m.has(S)){if(z.length<Q.length){var p=Q[0],d;c=p.prev;var P=z[0],K=z[z.length-1];for(d=0;d<z.length;d+=1)mt(z[d],p,_);for(d=0;d<Q.length;d+=1)m.delete(Q[d]);Te(o,P.prev,K.next),Te(o,c,P),Te(o,K,p),u=p,c=K,x-=1,z=[],Q=[]}else m.delete(S),mt(S,u,_),Te(o,S.prev,S.next),Te(o,S,c===null?o.first:c.next),Te(o,c,S),c=S;continue}for(z=[],Q=[];u!==null&&u.k!==q;)(u.e.f&_t)===0&&(m??=new Set).add(u),Q.push(u),u=u.next;if(u===null)continue;S=u}z.push(S),c=S,u=S.next}if(u!==null||m!==void 0){for(var b=m===void 0?[]:Vt(m);u!==null;)(u.e.f&_t)===0&&b.push(u),u=u.next;var $=b.length;if($>0){var g=(v&Yt)!==0&&B===0?_:null;if(f){for(x=0;x<$;x+=1)b[x].a?.measure();for(x=0;x<$;x+=1)b[x].a?.fix()}$r(o,b,g)}}f&&Qt(()=>{if(T!==void 0)for(S of T)S.a?.apply()}),n.first=o.first&&o.first.e,n.last=c&&c.e;for(var D of l.values())Jt(D.e);l.clear()}function Zt(n,i,o,l){(l&dt)!==0&&Ft(n.v,i),(l&ht)!==0?Ft(n.i,o):n.i=o}function Et(n,i,o,l,_,h,v,R,j,f,E){var B=(j&dt)!==0,C=(j&gr)===0,F=B?C?G(_,!1,!1):$t(_):_,u=(j&ht)===0?v:$t(v),m={i:u,v:F,k:h,a:null,e:null,prev:o,next:l};try{if(n===null){var c=document.createDocumentFragment();c.append(n=Kt())}return m.e=kt(()=>R(n,F,u,f),Ee),m.e.prev=o&&o.e,m.e.next=l&&l.e,o===null?E||(i.first=m):(o.next=m,o.e.next=m.e),l!==null&&(l.prev=m,l.e.prev=m.e),m}finally{}}function mt(n,i,o){for(var l=n.next?n.next.e.nodes_start:o,_=i?i.e.nodes_start:o,h=n.e.nodes_start;h!==null&&h!==l;){var v=br(h);_.before(h),h=v}}function Te(n,i,o){i===null?n.first=o:(i.next=o,i.e.next=o&&o.e),o!==null&&(o.prev=i,o.e.prev=i&&i.e)}function zr(n,i,o){var l=n==null?"":""+n;return l=l?l+" "+i:i,l===""?null:l}function Nr(n,i){return n==null?null:String(n)}function Br(n,i,o,l,_,h){var v=n.__className;if(Ee||v!==o||v===void 0){var R=zr(o,l);(!Ee||R!==n.getAttribute("class"))&&(R==null?n.removeAttribute("class"):n.className=R),n.__className=o}return h}function ct(n,i,o,l){var _=n.__style;if(Ee||_!==i){var h=Nr(i);(!Ee||h!==n.getAttribute("style"))&&(h==null?n.removeAttribute("style"):n.style.cssText=h),n.__style=i}return l}const Ur=()=>performance.now(),Me={tick:n=>requestAnimationFrame(n),now:()=>Ur(),tasks:new Set};function er(){const n=Me.now();Me.tasks.forEach(i=>{i.c(n)||(Me.tasks.delete(i),i.f())}),Me.tasks.size!==0&&Me.tick(er)}function Hr(n){let i;return Me.tasks.size===0&&Me.tick(er),{promise:new Promise(o=>{Me.tasks.add(i={c:n,f:o})}),abort(){Me.tasks.delete(i)}}}function at(n,i){It(()=>{n.dispatchEvent(new CustomEvent(i))})}function qr(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const i=n.split("-");return i.length===1?i[0]:i[0]+i.slice(1).map(o=>o[0].toUpperCase()+o.slice(1)).join("")}function zt(n){const i={},o=n.split(";");for(const l of o){const[_,h]=l.split(":");if(!_||h===void 0)break;const v=qr(_.trim());i[v]=h.trim()}return i}const Wr=n=>n;function Dt(n,i,o,l){var _=(n&Tr)!==0,h=(n&Cr)!==0,v=_&&h,R=(n&Or)!==0,j=v?"both":_?"in":"out",f,E=i.inert,B=i.style.overflow,C,F;function u(){return It(()=>f??=o()(i,l?.()??{},{direction:j}))}var m={is_global:R,in(){if(i.inert=E,!_){F?.abort(),F?.reset?.();return}h||C?.abort(),at(i,"introstart"),C=xt(i,u(),F,1,()=>{at(i,"introend"),C?.abort(),C=f=void 0,i.style.overflow=B})},out(Q){if(!h){Q?.(),f=void 0;return}i.inert=!0,at(i,"outrostart"),F=xt(i,u(),C,0,()=>{at(i,"outroend"),Q?.()})},stop:()=>{C?.abort(),F?.abort()}},c=Xt;if((c.transitions??=[]).push(m),_&&Fr){var T=R;if(!T){for(var z=c.parent;z&&(z.f&Er)!==0;)for(;(z=z.parent)&&(z.f&xr)===0;);T=!z||(z.f&Rr)!==0}T&&Sr(()=>{be(()=>m.in())})}}function xt(n,i,o,l,_){var h=l===1;if(Ir(i)){var v,R=!1;return Qt(()=>{if(!R){var c=i({direction:h?"in":"out"});v=xt(n,c,o,l,_)}}),{abort:()=>{R=!0,v?.abort()},deactivate:()=>v.deactivate(),reset:()=>v.reset(),t:()=>v.t()}}if(o?.deactivate(),!i?.duration)return _(),{abort:Ge,deactivate:Ge,reset:Ge,t:()=>l};const{delay:j=0,css:f,tick:E,easing:B=Wr}=i;var C=[];if(h&&o===void 0&&(E&&E(0,1),f)){var F=zt(f(0,1));C.push(F,F)}var u=()=>1-l,m=n.animate(C,{duration:j,fill:"forwards"});return m.onfinish=()=>{m.cancel();var c=o?.t()??1-l;o?.abort();var T=l-c,z=i.duration*Math.abs(T),Q=[];if(z>0){var ee=!1;if(f)for(var q=Math.ceil(z/16.666666666666668),S=0;S<=q;S+=1){var x=c+T*B(S/q),t=zt(f(x,1-x));Q.push(t),ee||=t.overflow==="hidden"}ee&&(n.style.overflow="hidden"),u=()=>{var r=m.currentTime;return c+T*B(r/z)},E&&Hr(()=>{if(m.playState!=="running")return!1;var r=u();return E(r,1-r),!0})}m=n.animate(Q,{duration:z,fill:"forwards"}),m.onfinish=()=>{u=()=>l,E?.(l,1-l),_()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=Ge)},deactivate:()=>{_=Ge},reset:()=>{l===0&&E?.(1,0)},t:()=>u()}}function Nt(n,i,o=i){var l=new WeakSet;Ar(n,"input",async _=>{var h=_?n.defaultValue:n.value;if(h=bt(n)?yt(h):h,o(h),We!==null&&l.add(We),await Dr(),h!==(h=i())){var v=n.selectionStart,R=n.selectionEnd,j=n.value.length;if(n.value=h??"",R!==null){var f=n.value.length;v===R&&R===j&&f>j?(n.selectionStart=f,n.selectionEnd=f):(n.selectionStart=v,n.selectionEnd=Math.min(R,f))}}}),(Ee&&n.defaultValue!==n.value||be(i)==null&&n.value)&&(o(bt(n)?yt(n.value):n.value),We!==null&&l.add(We)),Lr(()=>{var _=i();if(n===document.activeElement){var h=Mr??We;if(l.has(h))return}bt(n)&&_===yt(n.value)||n.type==="date"&&!_&&!n.value||_!==n.value&&(n.value=_??"")})}function bt(n){var i=n.type;return i==="number"||i==="range"}function yt(n){return n===""?null:+n}function st(n,i){Pr(window,["resize"],()=>It(()=>i(window[n])))}const Je=At({boys:{},girls:{}}),Rt=At([]),St=At([]),Kr=""+new URL("../assets/lovemailbox.BNs235_i.png",import.meta.url).href;var Yr=ce("<div><!></div>"),Vr=ce('<div class="title svelte-27ckzk"><img alt="mailbox" class="mailbox svelte-27ckzk"/> <span> </span></div> <div class="box"></div>',1);function Bt(n,i){Ze(i,!1);let o=Re(i,"pref",12),l=Re(i,"size",12),_=Re(i,"name",8),h=Re(i,"group",8),v=Re(i,"lockedIn",8),R=G(0),j={x:30,y:-20},f=G(0),E=G(0),B=G(0),C=G(0),F=G(),u=G(),m=G(),c=!1;Wt(()=>{window.scrollTo(0,0);const b=e(R).getBoundingClientRect();Je.update($=>($[h()][_()]={...b,left:b.left+j.x,top:b.top+j.y},$)),I(F,!0)});function T(b,$){v()||(I(u,$),b.dataTransfer.effectAllowed="move",b.dataTransfer.setData("text/html",b.target.innerHTML),b.target.style.opacity="0.4")}function z(b){b.target.style.opacity="1",I(u,null),I(m,null)}function Q(b,$){v()||(I(u,$),c=!0,b.touches[0].clientY,b.currentTarget.style.opacity="0.4")}function ee(b){if(!c||v())return;b.preventDefault();const $=b.touches[0],g=document.elementFromPoint($.clientX,$.clientY);if(g&&g.classList.contains("names")){const D=g.getBoundingClientRect(),a=D.top+D.height/2,L=$.clientY,k=Array.from(g.parentElement.children).indexOf(g);k!==-1&&(L>a?I(m,k+1):I(m,k))}}function q(b){if(c){if(b.currentTarget.style.opacity="1",c=!1,e(u)!==null&&e(m)!==null){let $=e(m);e(u)<$&&$--;const g=[...o()],D=g[e(u)];g.splice(e(u),1),g.splice($,0,D),o(g)}I(u,null),I(m,null)}}function S(b){return b.preventDefault&&b.preventDefault(),b.dataTransfer.dropEffect="move",!1}function x(b,$){if(e(u)===null||v())return;const g=b.currentTarget.getBoundingClientRect(),D=g.top+g.height/2;b.clientY>D?I(m,$+1):I(m,$)}function t(b,$){if(b.stopPropagation&&b.stopPropagation(),e(u)===null||v())return!1;let g=e(m);e(u)<g&&g--;const D=[...o()],a=D[e(u)];return D.splice(e(u),1),D.splice(g,0,a),o(D),!1}Ce(()=>(e(F),e(f),e(E),e(B),e(C),$e(l()),$e(o()),e(R),Je),()=>{if(e(F)){I(f,e(f)),I(E,e(E)),I(B,e(B)),I(C,e(C)),l(l()),o(),console.log("resized");const b=e(R).getBoundingClientRect();Je.update($=>($[h()][_()]={...b,left:b.left+j.x,top:b.top+j.y},$))}}),Tt(),Ot();var r=Vr(),s=Ae(r),p=Z(s);wt(p,b=>I(R,b),()=>e(R));var d=X(p,2),P=Z(d);W(d),W(s);var K=X(s,2);Se(K,5,o,Le,(b,$,g)=>{var D=Yr();D.__touchstart=k=>Q(k,g),D.__touchmove=ee,D.__touchend=q;var a=Z(D);{var L=k=>{var y=Fe();ue(()=>he(y,`#${g+1} ${e($)??""}`)),Y(k,y)},O=k=>{var y=Fe();ue(()=>he(y,`#${g+1} ${e($)??""}`)),Y(k,y)};me(a,k=>{g===0?k(L):k(O,!1)})}W(D),ue(()=>{Br(D,1,`names ${v()?"locked":""} 
                   ${e(m)===g&&e(u)!==g&&e(u)!==g-1?"dragging-over-top":""} 
                   ${e(m)===g+1&&e(u)!==g&&e(u)!==g+1?"dragging-over-bottom":""}`,"svelte-27ckzk"),Xe(D,"draggable",!v())}),it("dragstart",D,k=>T(k,g)),it("dragend",D,z),it("dragover",D,k=>{S(k),x(k,g)}),it("drop",D,k=>t(k)),Y(b,D)}),W(K),ue(()=>{Xe(p,"src",Kr),he(P,`${_()??""}'s List`)}),st("innerHeight",b=>I(f,b)),st("innerWidth",b=>I(E,b)),st("outerHeight",b=>I(B,b)),st("outerWidth",b=>I(C,b)),Y(n,r),et()}Ct(["touchstart","touchmove","touchend"]);const Gr=n=>n;function Qr(n){const i=n-1;return i*i*i+1}function Ut(n){const i=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return i?[parseFloat(i[1]),i[2]||"px"]:[n,"px"]}function tr(n,{delay:i=0,duration:o=400,easing:l=Gr}={}){const _=+getComputedStyle(n).opacity;return{delay:i,duration:o,easing:l,css:h=>`opacity: ${h*_}`}}function Jr(n,{delay:i=0,duration:o=400,easing:l=Qr,x:_=0,y:h=0,opacity:v=0}={}){const R=getComputedStyle(n),j=+R.opacity,f=R.transform==="none"?"":R.transform,E=j*(1-v),[B,C]=Ut(_),[F,u]=Ut(h);return{delay:i,duration:o,easing:l,css:(m,c)=>`
			transform: ${f} translate(${(1-m)*B}${C}, ${(1-m)*F}${u});
			opacity: ${j-E*c}`}}var Xr=ce('<div class="envelope svelte-1vbmvhy">✉️</div>');function Zr(n,i){Ze(i,!0);let o=lt(ut({boys:{},girls:{}})),l=lt(ut([]));Je.subscribe(v=>I(o,v,!0)),Rt.subscribe(v=>I(l,v,!0));var _=Ue(),h=Ae(_);Se(h,17,()=>e(l),v=>v.id,(v,R)=>{var j=Ue(),f=Ae(j);{var E=B=>{const C=He(()=>e(o).boys[e(R).from]),F=He(()=>e(o).girls[e(R).to]);var u=Xr();ue(()=>ct(u,`left: ${e(F).left??""}px; top: ${e(F).top??""}px;`)),Dt(5,u,()=>Jr,()=>({x:e(C).left-e(F).left,y:e(C).top-e(F).top,opacity:1,duration:800})),Y(B,u)};me(f,B=>{e(o).boys[e(R).from]&&e(o).girls[e(R).to]&&B(E)})}Y(v,j)}),Y(n,_),et()}function Ht(n,i){const o=Date.now()+Math.random();console.log("[sendEnvelope] enqueue",n,"->",i,o),Rt.update(l=>[...l,{from:n,to:i,id:o}]),setTimeout(()=>{Rt.update(l=>l.filter(_=>_.id!==o)),console.log("[sendEnvelope] removed",o)},800)}function Qe(n,i,o=800){n==="replaced"&&(o=1e3);const l=Date.now()+Math.random();console.log("[sendEffect]",n,i),St.update(_=>[..._,{id:l,type:n,people:i}]),setTimeout(()=>{St.update(_=>_.filter(h=>h.id!==l))},o)}const en=""+new URL("../assets/lotsofhearts.BNwOjjSl.gif",import.meta.url).href,tn="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20576%20512'%3e%3c!--!Font%20Awesome%20Free%206.5.2%20by%20@fontawesome%20-%20https://fontawesome.com%20License%20-%20https://fontawesome.com/license/free%20Copyright%202024%20Fonticons,%20Inc.--%3e%3cpath%20fill='%233ca0d3'%20d='M575.8%20255.5c0%2018-15%2032.1-32%2032.1h-32l.7%20160.2c0%202.7-.2%205.4-.5%208.1V472c0%2022.1-17.9%2040-40%2040H456c-1.1%200-2.2%200-3.3-.1c-1.4%20.1-2.8%20.1-4.2%20.1H416%20392c-22.1%200-40-17.9-40-40V448%20384c0-17.7-14.3-32-32-32H256c-17.7%200-32%2014.3-32%2032v64%2024c0%2022.1-17.9%2040-40%2040H160%20128.1c-1.5%200-3-.1-4.5-.2c-1.2%20.1-2.4%20.2-3.6%20.2H104c-22.1%200-40-17.9-40-40V360c0-.9%200-1.9%20.1-2.8V287.6H32c-18%200-32-14-32-32.1c0-9%203-17%2010-24L266.4%208c7-7%2015-8%2022-8s15%202%2021%207L564.8%20231.5c8%207%2012%2015%2011%2024z'/%3e%3c/svg%3e";var rn=ce('<div class="log-line"> </div>'),nn=ce('<div class="log-line"> </div>'),an=ce('<button class="retro-btn start">Lock In Preferences</button>'),sn=ce('<button class="retro-btn next">Next Step</button>'),on=ce('<li><span style="color:crimson;"> </span></li>'),ln=ce("<li> </li>"),un=ce("<li> </li>"),fn=ce("<li> </li>"),cn=ce('<div class="endscreen svelte-14o7mzv"><img class="background-gif svelte-14o7mzv" alt="Celebration"/> <div class="box svelte-14o7mzv" style="padding-inline: 2rem; padding-bottom: 1rem; text-align: center; z-index: 1; background: rgba(255, 255, 255, 0.95);"><ul class="svelte-14o7mzv"><!> <!> <!></ul> <div class="stats svelte-14o7mzv"><div><!></div> <div><!></div> <div><!></div> <div> </div> <div> </div></div> <button class="retro-btn next">Restart</button></div></div>'),dn=ce('<div class="log-container floating" style="left:5%;"><div class="log-line" style="margin-bottom: 0;"><u>Activity Log:</u></div> <div class="log-box"></div></div> <div class="log-container floating" style="left: 22%; width: 8.5%;"><div class="log-line" style="margin-bottom: 0;"><u>Engagements:</u></div> <div class="log-box"></div></div> <div class="button-panel-wrapper"><div class="button-panel"><!> <!></div> <a class="info-btn-side" href="https://nicholashayek.com/"><img alt="" width="25px"/></a> <button class="info-btn-side" style="margin-left: 4rem">Mute</button></div> <!>',1);function hn(n,i){Ze(i,!1);let o=Re(i,"boyPreferences",8),l=Re(i,"girlPreferences",8),_=Re(i,"boys",8),h=Re(i,"girls",8),v=Re(i,"lockedIn",12),R=Re(i,"audio",12),j=[..._()],f={},E=G({}),B=G(0),C=G(0),F=G(0),u=0,m=0,c=G(!1),T=G(!1),z=G([]),Q=G(),ee=G(),q=G(0);function S(w){e(z).push("> "+w),I(z,e(z)),console.log(e(z))}let x=G(0),t=G(0);function r(){I(z,[]),j=[..._()],f={},I(E,{}),I(c,!1),I(T,!0),v(!v()),I(B,0),I(C,0),I(F,0),_().forEach(w=>f[w]=0)}function s(){I(T,!1),I(c,!1),I(z,[]),v(!v()),I(E,{}),I(B,0),I(C,0),I(F,0)}function p(){if(I(q,e(q)+1),j.length===0){I(c,!0),I(T,!1);return}if(Object.entries(e(E)).length===h().length){I(c,!0),I(T,!1);return}u=j[0],m=o()[u][f[u]],f[u]++,gt(B),S(`${u} proposes to ${m}.`),Ht(u,m);const w=e(E)[m];if(!w)we(E,e(E)[m]=u),j.shift(),Qe("tentative",[u,m]),S(`${m} accepts ${u}'s proposal.`);else{const M=l()[m];M.indexOf(u)<M.indexOf(w)?(S(`${m} dumps ${w} for ${u}!`),gt(F),we(E,e(E)[m]=u),j[0]=w,Qe("replaced",[w]),Qe("tentative",[u,m])):(S(`${m} rejects ${u}.`),gt(C),Ht(m,u),I(q,e(q)+1),Qe("rejector",[m]),Qe("rejected",[u]))}}Ce(()=>(e(q),e(Q),e(ee)),()=>{e(q)!=0&&(console.log("scroll"),e(Q).scrollTo({top:e(Q).scrollHeight,behavior:"smooth"}),e(ee).scrollTo({top:e(ee).scrollHeight,behavior:"smooth"}))}),Ce(()=>(e(E),$e(o()),$e(l())),()=>{let w=Object.entries(e(E)).map(([U,A])=>o()[A].indexOf(U)+1);I(x,w.length>0?(w.reduce((U,A)=>U+A,0)/w.length).toFixed(2):0);let M=Object.entries(e(E)).map(([U,A])=>l()[U].indexOf(A)+1);I(t,M.length>0?(M.reduce((U,A)=>U+A,0)/M.length).toFixed(2):0)}),Tt(),Ot();var d=dn(),P=Ae(d),K=X(Z(P),2);Se(K,5,()=>e(z),Le,(w,M)=>{var U=rn(),A=Z(U,!0);W(U),ue(()=>he(A,e(M))),Y(w,U)}),W(K),wt(K,w=>I(Q,w),()=>e(Q)),W(P);var b=X(P,2),$=X(Z(b),2);Se($,5,()=>(e(E),be(()=>Object.entries(e(E)))),Le,(w,M)=>{var U=He(()=>ft(e(M),2));let A=()=>e(U)[0],re=()=>e(U)[1];var se=nn(),J=Z(se);W(se),ue(()=>he(J,`${A()??""} & ${re()??""}`)),Y(w,se)}),W($),wt($,w=>I(ee,w),()=>e(ee)),W(b);var g=X(b,2),D=Z(g),a=Z(D);{var L=w=>{var M=an();M.__click=r,Y(w,M)};me(a,w=>{e(T)||w(L)})}var O=X(a,2);{var k=w=>{var M=sn();M.__click=p,Y(w,M)};me(O,w=>{e(T)&&!e(c)&&w(k)})}W(D);var y=X(D,2),te=Z(y);W(y);var ae=X(y,2);ae.__click=()=>{R(R().volume=.5-R().volume,!0)},W(g);var ie=X(g,2);{var _e=w=>{var M=cn(),U=Z(M),A=X(U,2),re=Z(A),se=Z(re);Se(se,1,()=>(e(E),be(()=>Object.entries(e(E)))),Le,(V,le,Pe,rt)=>{var Lt=He(()=>ft(e(le),2));let Ke=()=>e(Lt)[0],Ye=()=>e(Lt)[1];var Mt=Ue(),rr=Ae(Mt);{var nr=qe=>{var Be=on(),nt=Z(Be),ar=Z(nt);W(nt),W(Be),ue(()=>he(ar,`${Ke()??""} <3 ${Ye()??""}`)),Y(qe,Be)},ir=qe=>{var Be=ln(),nt=Z(Be);W(Be),ue(()=>he(nt,`${Ke()??""} <3 ${Ye()??""}`)),Y(qe,Be)};me(rr,qe=>{$e(l()),Ke(),Ye(),$e(o()),be(()=>l()[Ke()][0]===Ye()&&Ke()===o()[Ye()][0])?qe(nr):qe(ir,!1)})}Y(V,Mt)});var J=X(se,2);Se(J,1,()=>($e(h()),e(E),be(()=>h().filter(V=>!Object.keys(e(E)).includes(V)))),Le,(V,le)=>{var Pe=un(),rt=Z(Pe);W(Pe),ue(()=>he(rt,`${e(le)??""} :(`)),Y(V,Pe)});var ne=X(J,2);Se(ne,1,()=>($e(_()),e(E),be(()=>_().filter(V=>!Object.values(e(E)).includes(V)))),Le,(V,le)=>{var Pe=fn(),rt=Z(Pe);W(Pe),ue(()=>he(rt,`${e(le)??""} :(`)),Y(V,Pe)}),W(re);var H=X(re,2),pe=Z(H),N=Z(pe);{var oe=V=>{var le=Fe();ue(()=>he(le,`${e(B)??""} Proposals`)),Y(V,le)},Oe=V=>{var le=Fe();ue(()=>he(le,`${e(B)??""} Proposal`)),Y(V,le)};me(N,V=>{e(B)!=1?V(oe):V(Oe,!1)})}W(pe);var Ie=X(pe,2),ye=Z(Ie);{var je=V=>{var le=Fe();ue(()=>he(le,`${e(C)??""} Rejections`)),Y(V,le)},de=V=>{var le=Fe();ue(()=>he(le,`${e(C)??""} Rejection`)),Y(V,le)};me(ye,V=>{e(C)!=1?V(je):V(de,!1)})}W(Ie);var ge=X(Ie,2),fe=Z(ge);{var ve=V=>{var le=Fe();ue(()=>he(le,`${e(F)??""} Breakups`)),Y(V,le)},xe=V=>{var le=Fe();ue(()=>he(le,`${e(F)??""} Breakup`)),Y(V,le)};me(fe,V=>{e(F)!=1?V(ve):V(xe,!1)})}W(ge);var ze=X(ge,2),tt=Z(ze);W(ze);var De=X(ze,2),ke=Z(De);W(De),W(H);var Ne=X(H,2);Ne.__click=s,W(A),W(M),ue(()=>{Xe(U,"src",en),he(tt,`${e(x)??""} = Mean Top Partner Ranking`),he(ke,`${e(t)??""} = Mean Bottom Partner Ranking`)}),Dt(3,M,()=>tr),Y(w,M)};me(ie,w=>{e(c)&&w(_e)})}ue(()=>Xe(te,"src",tn)),Y(n,d),et()}Ct(["click"]);const vn=""+new URL("../assets/heart.Bpr07Mgz.gif",import.meta.url).href,pn=""+new URL("../assets/crying.CHRd97a5.gif",import.meta.url).href,_n=""+new URL("../assets/breakup.D_EuIFF7.gif",import.meta.url).href,gn=""+new URL("../assets/rejected.DapKlnpD.gif",import.meta.url).href;var mn=ce('<img class="effect svelte-cps1d0" alt="gifs"/>');function bn(n,i){Ze(i,!0);let o=lt(ut([])),l=lt(ut({boys:{},girls:{}}));St.subscribe(R=>I(o,R,!0)),Je.subscribe(R=>I(l,R,!0));const _={tentative:vn,replaced:_n,rejector:gn,rejected:pn};var h=Ue(),v=Ae(h);Se(v,17,()=>e(o),R=>R.id,(R,j)=>{var f=Ue(),E=Ae(f);{var B=C=>{var F=Ue(),u=Ae(F);Se(u,17,()=>e(j).people,Le,(m,c)=>{var T=Ue(),z=Ae(T);{var Q=ee=>{const q=He(()=>e(l).boys[e(c)]||e(l).girls[e(c)]);var S=mn();ue(()=>{Xe(S,"src",_[e(j).type]),ct(S,`left:${e(q).left+20}px; top:${e(q).top+100}px;`)}),Dt(7,S,()=>tr,()=>({duration:800})),Y(ee,S)};me(z,ee=>{(e(l).boys[e(c)]||e(l).girls[e(c)])&&ee(Q)})}Y(m,T)}),Y(C,F)};me(E,C=>{e(j).people&&C(B)})}Y(R,f)}),Y(n,h),et()}const yn=""+new URL("../assets/titanic.B2rvjAN8.mp3",import.meta.url).href;var ot={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var kn=ot.exports,qt;function wn(){return qt||(qt=1,(function(n,i){((o,l)=>{n.exports=l()})(kn,function o(){var l=typeof self<"u"?self:typeof window<"u"?window:l!==void 0?l:{},_,h=!l.document&&!!l.postMessage,v=l.IS_PAPA_WORKER||!1,R={},j=0,f={};function E(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(r){var s=q(r);s.chunkSize=parseInt(s.chunkSize),r.step||r.chunk||(s.chunkSize=null),this._handle=new m(s),(this._handle.streamer=this)._config=s}).call(this,t),this.parseChunk=function(r,s){var p=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<p){let P=this._config.newline;P||(d=this._config.quoteChar||'"',P=this._handle.guessLineEndings(r,d)),r=[...r.split(P).slice(p)].join(P)}this.isFirstChunk&&x(this._config.beforeFirstChunk)&&(d=this._config.beforeFirstChunk(r))!==void 0&&(r=d),this.isFirstChunk=!1,this._halted=!1;var p=this._partialLine+r,d=(this._partialLine="",this._handle.parse(p,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(r=d.meta.cursor,p=(this._finished||(this._partialLine=p.substring(r-this._baseIndex),this._baseIndex=r),d&&d.data&&(this._rowCount+=d.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),v)l.postMessage({results:d,workerId:f.WORKER_ID,finished:p});else if(x(this._config.chunk)&&!s){if(this._config.chunk(d,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=d=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(d.data),this._completeResults.errors=this._completeResults.errors.concat(d.errors),this._completeResults.meta=d.meta),this._completed||!p||!x(this._config.complete)||d&&d.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),p||d&&d.meta.paused||this._nextChunk(),d}this._halted=!0},this._sendError=function(r){x(this._config.error)?this._config.error(r):v&&this._config.error&&l.postMessage({workerId:f.WORKER_ID,error:r,finished:!1})}}function B(t){var r;(t=t||{}).chunkSize||(t.chunkSize=f.RemoteChunkSize),E.call(this,t),this._nextChunk=h?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(s){this._input=s,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(r=new XMLHttpRequest,this._config.withCredentials&&(r.withCredentials=this._config.withCredentials),h||(r.onload=S(this._chunkLoaded,this),r.onerror=S(this._chunkError,this)),r.open(this._config.downloadRequestBody?"POST":"GET",this._input,!h),this._config.downloadRequestHeaders){var s,p=this._config.downloadRequestHeaders;for(s in p)r.setRequestHeader(s,p[s])}var d;this._config.chunkSize&&(d=this._start+this._config.chunkSize-1,r.setRequestHeader("Range","bytes="+this._start+"-"+d));try{r.send(this._config.downloadRequestBody)}catch(P){this._chunkError(P.message)}h&&r.status===0&&this._chunkError()}},this._chunkLoaded=function(){r.readyState===4&&(r.status<200||400<=r.status?this._chunkError():(this._start+=this._config.chunkSize||r.responseText.length,this._finished=!this._config.chunkSize||this._start>=(s=>(s=s.getResponseHeader("Content-Range"))!==null?parseInt(s.substring(s.lastIndexOf("/")+1)):-1)(r),this.parseChunk(r.responseText)))},this._chunkError=function(s){s=r.statusText||s,this._sendError(new Error(s))}}function C(t){(t=t||{}).chunkSize||(t.chunkSize=f.LocalChunkSize),E.call(this,t);var r,s,p=typeof FileReader<"u";this.stream=function(d){this._input=d,s=d.slice||d.webkitSlice||d.mozSlice,p?((r=new FileReader).onload=S(this._chunkLoaded,this),r.onerror=S(this._chunkError,this)):r=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var d=this._input,P=(this._config.chunkSize&&(P=Math.min(this._start+this._config.chunkSize,this._input.size),d=s.call(d,this._start,P)),r.readAsText(d,this._config.encoding));p||this._chunkLoaded({target:{result:P}})},this._chunkLoaded=function(d){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(d.target.result)},this._chunkError=function(){this._sendError(r.error)}}function F(t){var r;E.call(this,t=t||{}),this.stream=function(s){return r=s,this._nextChunk()},this._nextChunk=function(){var s,p;if(!this._finished)return s=this._config.chunkSize,r=s?(p=r.substring(0,s),r.substring(s)):(p=r,""),this._finished=!r,this.parseChunk(p)}}function u(t){E.call(this,t=t||{});var r=[],s=!0,p=!1;this.pause=function(){E.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){E.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(d){this._input=d,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){p&&r.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),r.length?this.parseChunk(r.shift()):s=!0},this._streamData=S(function(d){try{r.push(typeof d=="string"?d:d.toString(this._config.encoding)),s&&(s=!1,this._checkIsFinished(),this.parseChunk(r.shift()))}catch(P){this._streamError(P)}},this),this._streamError=S(function(d){this._streamCleanUp(),this._sendError(d)},this),this._streamEnd=S(function(){this._streamCleanUp(),p=!0,this._streamData("")},this),this._streamCleanUp=S(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function m(t){var r,s,p,d,P=Math.pow(2,53),K=-P,b=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,$=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,g=this,D=0,a=0,L=!1,O=!1,k=[],y={data:[],errors:[],meta:{}};function te(w){return t.skipEmptyLines==="greedy"?w.join("").trim()==="":w.length===1&&w[0].length===0}function ae(){if(y&&p&&(_e("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),p=!1),t.skipEmptyLines&&(y.data=y.data.filter(function(A){return!te(A)})),ie()){let A=function(re,se){x(t.transformHeader)&&(re=t.transformHeader(re,se)),k.push(re)};if(y)if(Array.isArray(y.data[0])){for(var w=0;ie()&&w<y.data.length;w++)y.data[w].forEach(A);y.data.splice(0,1)}else y.data.forEach(A)}function M(A,re){for(var se=t.header?{}:[],J=0;J<A.length;J++){var ne=J,H=A[J],H=((pe,N)=>(oe=>(t.dynamicTypingFunction&&t.dynamicTyping[oe]===void 0&&(t.dynamicTyping[oe]=t.dynamicTypingFunction(oe)),(t.dynamicTyping[oe]||t.dynamicTyping)===!0))(pe)?N==="true"||N==="TRUE"||N!=="false"&&N!=="FALSE"&&((oe=>{if(b.test(oe)&&(oe=parseFloat(oe),K<oe&&oe<P))return 1})(N)?parseFloat(N):$.test(N)?new Date(N):N===""?null:N):N)(ne=t.header?J>=k.length?"__parsed_extra":k[J]:ne,H=t.transform?t.transform(H,ne):H);ne==="__parsed_extra"?(se[ne]=se[ne]||[],se[ne].push(H)):se[ne]=H}return t.header&&(J>k.length?_e("FieldMismatch","TooManyFields","Too many fields: expected "+k.length+" fields but parsed "+J,a+re):J<k.length&&_e("FieldMismatch","TooFewFields","Too few fields: expected "+k.length+" fields but parsed "+J,a+re)),se}var U;y&&(t.header||t.dynamicTyping||t.transform)&&(U=1,!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(M),U=y.data.length):y.data=M(y.data,0),t.header&&y.meta&&(y.meta.fields=k),a+=U)}function ie(){return t.header&&k.length===0}function _e(w,M,U,A){w={type:w,code:M,message:U},A!==void 0&&(w.row=A),y.errors.push(w)}x(t.step)&&(d=t.step,t.step=function(w){y=w,ie()?ae():(ae(),y.data.length!==0&&(D+=w.data.length,t.preview&&D>t.preview?s.abort():(y.data=y.data[0],d(y,g))))}),this.parse=function(w,M,U){var A=t.quoteChar||'"',A=(t.newline||(t.newline=this.guessLineEndings(w,A)),p=!1,t.delimiter?x(t.delimiter)&&(t.delimiter=t.delimiter(w),y.meta.delimiter=t.delimiter):((A=((re,se,J,ne,H)=>{var pe,N,oe,Oe;H=H||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var Ie=0;Ie<H.length;Ie++){for(var ye,je=H[Ie],de=0,ge=0,fe=0,ve=(oe=void 0,new T({comments:ne,delimiter:je,newline:se,preview:10}).parse(re)),xe=0;xe<ve.data.length;xe++)J&&te(ve.data[xe])?fe++:(ye=ve.data[xe].length,ge+=ye,oe===void 0?oe=ye:0<ye&&(de+=Math.abs(ye-oe),oe=ye));0<ve.data.length&&(ge/=ve.data.length-fe),(N===void 0||de<=N)&&(Oe===void 0||Oe<ge)&&1.99<ge&&(N=de,pe=je,Oe=ge)}return{successful:!!(t.delimiter=pe),bestDelimiter:pe}})(w,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=A.bestDelimiter:(p=!0,t.delimiter=f.DefaultDelimiter),y.meta.delimiter=t.delimiter),q(t));return t.preview&&t.header&&A.preview++,r=w,s=new T(A),y=s.parse(r,M,U),ae(),L?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return L},this.pause=function(){L=!0,s.abort(),r=x(t.chunk)?"":r.substring(s.getCharIndex())},this.resume=function(){g.streamer._halted?(L=!1,g.streamer.parseChunk(r,!0)):setTimeout(g.resume,3)},this.aborted=function(){return O},this.abort=function(){O=!0,s.abort(),y.meta.aborted=!0,x(t.complete)&&t.complete(y),r=""},this.guessLineEndings=function(re,A){re=re.substring(0,1048576);var A=new RegExp(c(A)+"([^]*?)"+c(A),"gm"),U=(re=re.replace(A,"")).split("\r"),A=re.split(`
`),re=1<A.length&&A[0].length<U[0].length;if(U.length===1||re)return`
`;for(var se=0,J=0;J<U.length;J++)U[J][0]===`
`&&se++;return se>=U.length/2?`\r
`:"\r"}}function c(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function T(t){var r=(t=t||{}).delimiter,s=t.newline,p=t.comments,d=t.step,P=t.preview,K=t.fastMode,b=null,$=!1,g=t.quoteChar==null?'"':t.quoteChar,D=g;if(t.escapeChar!==void 0&&(D=t.escapeChar),(typeof r!="string"||-1<f.BAD_DELIMITERS.indexOf(r))&&(r=","),p===r)throw new Error("Comment character same as delimiter");p===!0?p="#":(typeof p!="string"||-1<f.BAD_DELIMITERS.indexOf(p))&&(p=!1),s!==`
`&&s!=="\r"&&s!==`\r
`&&(s=`
`);var a=0,L=!1;this.parse=function(O,k,y){if(typeof O!="string")throw new Error("Input must be a string");var te=O.length,ae=r.length,ie=s.length,_e=p.length,w=x(d),M=[],U=[],A=[],re=a=0;if(!O)return de();if(K||K!==!1&&O.indexOf(g)===-1){for(var se=O.split(s),J=0;J<se.length;J++){if(A=se[J],a+=A.length,J!==se.length-1)a+=s.length;else if(y)return de();if(!p||A.substring(0,_e)!==p){if(w){if(M=[],Oe(A.split(r)),ge(),L)return de()}else Oe(A.split(r));if(P&&P<=J)return M=M.slice(0,P),de(!0)}}return de()}for(var ne=O.indexOf(r,a),H=O.indexOf(s,a),pe=new RegExp(c(D)+c(g),"g"),N=O.indexOf(g,a);;)if(O[a]===g)for(N=a,a++;;){if((N=O.indexOf(g,N+1))===-1)return y||U.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:M.length,index:a}),ye();if(N===te-1)return ye(O.substring(a,N).replace(pe,g));if(g===D&&O[N+1]===D)N++;else if(g===D||N===0||O[N-1]!==D){ne!==-1&&ne<N+1&&(ne=O.indexOf(r,N+1));var oe=Ie((H=H!==-1&&H<N+1?O.indexOf(s,N+1):H)===-1?ne:Math.min(ne,H));if(O.substr(N+1+oe,ae)===r){A.push(O.substring(a,N).replace(pe,g)),O[a=N+1+oe+ae]!==g&&(N=O.indexOf(g,a)),ne=O.indexOf(r,a),H=O.indexOf(s,a);break}if(oe=Ie(H),O.substring(N+1+oe,N+1+oe+ie)===s){if(A.push(O.substring(a,N).replace(pe,g)),je(N+1+oe+ie),ne=O.indexOf(r,a),N=O.indexOf(g,a),w&&(ge(),L))return de();if(P&&M.length>=P)return de(!0);break}U.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:M.length,index:a}),N++}}else if(p&&A.length===0&&O.substring(a,a+_e)===p){if(H===-1)return de();a=H+ie,H=O.indexOf(s,a),ne=O.indexOf(r,a)}else if(ne!==-1&&(ne<H||H===-1))A.push(O.substring(a,ne)),a=ne+ae,ne=O.indexOf(r,a);else{if(H===-1)break;if(A.push(O.substring(a,H)),je(H+ie),w&&(ge(),L))return de();if(P&&M.length>=P)return de(!0)}return ye();function Oe(fe){M.push(fe),re=a}function Ie(fe){var ve=0;return ve=fe!==-1&&(fe=O.substring(N+1,fe))&&fe.trim()===""?fe.length:ve}function ye(fe){return y||(fe===void 0&&(fe=O.substring(a)),A.push(fe),a=te,Oe(A),w&&ge()),de()}function je(fe){a=fe,Oe(A),A=[],H=O.indexOf(s,a)}function de(fe){if(t.header&&!k&&M.length&&!$){var ve=M[0],xe=Object.create(null),ze=new Set(ve);let tt=!1;for(let De=0;De<ve.length;De++){let ke=ve[De];if(xe[ke=x(t.transformHeader)?t.transformHeader(ke,De):ke]){let Ne,V=xe[ke];for(;Ne=ke+"_"+V,V++,ze.has(Ne););ze.add(Ne),ve[De]=Ne,xe[ke]++,tt=!0,(b=b===null?{}:b)[Ne]=ke}else xe[ke]=1,ve[De]=ke;ze.add(ke)}tt&&console.warn("Duplicate headers found and renamed."),$=!0}return{data:M,errors:U,meta:{delimiter:r,linebreak:s,aborted:L,truncated:!!fe,cursor:re+(k||0),renamedHeaders:b}}}function ge(){d(de()),M=[],U=[]}},this.abort=function(){L=!0},this.getCharIndex=function(){return a}}function z(t){var r=t.data,s=R[r.workerId],p=!1;if(r.error)s.userError(r.error,r.file);else if(r.results&&r.results.data){var d={abort:function(){p=!0,Q(r.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ee,resume:ee};if(x(s.userStep)){for(var P=0;P<r.results.data.length&&(s.userStep({data:r.results.data[P],errors:r.results.errors,meta:r.results.meta},d),!p);P++);delete r.results}else x(s.userChunk)&&(s.userChunk(r.results,d,r.file),delete r.results)}r.finished&&!p&&Q(r.workerId,r.results)}function Q(t,r){var s=R[t];x(s.userComplete)&&s.userComplete(r),s.terminate(),delete R[t]}function ee(){throw new Error("Not implemented.")}function q(t){if(typeof t!="object"||t===null)return t;var r,s=Array.isArray(t)?[]:{};for(r in t)s[r]=q(t[r]);return s}function S(t,r){return function(){t.apply(r,arguments)}}function x(t){return typeof t=="function"}return f.parse=function(t,r){var s=(r=r||{}).dynamicTyping||!1;if(x(s)&&(r.dynamicTypingFunction=s,s={}),r.dynamicTyping=s,r.transform=!!x(r.transform)&&r.transform,!r.worker||!f.WORKERS_SUPPORTED)return s=null,f.NODE_STREAM_INPUT,typeof t=="string"?(t=(p=>p.charCodeAt(0)!==65279?p:p.slice(1))(t),s=new(r.download?B:F)(r)):t.readable===!0&&x(t.read)&&x(t.on)?s=new u(r):(l.File&&t instanceof File||t instanceof Object)&&(s=new C(r)),s.stream(t);(s=(()=>{var p;return!!f.WORKERS_SUPPORTED&&(p=(()=>{var d=l.URL||l.webkitURL||null,P=o.toString();return f.BLOB_URL||(f.BLOB_URL=d.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",P,")();"],{type:"text/javascript"})))})(),(p=new l.Worker(p)).onmessage=z,p.id=j++,R[p.id]=p)})()).userStep=r.step,s.userChunk=r.chunk,s.userComplete=r.complete,s.userError=r.error,r.step=x(r.step),r.chunk=x(r.chunk),r.complete=x(r.complete),r.error=x(r.error),delete r.worker,s.postMessage({input:t,config:r,workerId:s.id})},f.unparse=function(t,r){var s=!1,p=!0,d=",",P=`\r
`,K='"',b=K+K,$=!1,g=null,D=!1,a=((()=>{if(typeof r=="object"){if(typeof r.delimiter!="string"||f.BAD_DELIMITERS.filter(function(k){return r.delimiter.indexOf(k)!==-1}).length||(d=r.delimiter),typeof r.quotes!="boolean"&&typeof r.quotes!="function"&&!Array.isArray(r.quotes)||(s=r.quotes),typeof r.skipEmptyLines!="boolean"&&typeof r.skipEmptyLines!="string"||($=r.skipEmptyLines),typeof r.newline=="string"&&(P=r.newline),typeof r.quoteChar=="string"&&(K=r.quoteChar),typeof r.header=="boolean"&&(p=r.header),Array.isArray(r.columns)){if(r.columns.length===0)throw new Error("Option columns is empty");g=r.columns}r.escapeChar!==void 0&&(b=r.escapeChar+K),r.escapeFormulae instanceof RegExp?D=r.escapeFormulae:typeof r.escapeFormulae=="boolean"&&r.escapeFormulae&&(D=/^[=+\-@\t\r].*$/)}})(),new RegExp(c(K),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return L(null,t,$);if(typeof t[0]=="object")return L(g||Object.keys(t[0]),t,$)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||g),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),L(t.fields||[],t.data||[],$);throw new Error("Unable to serialize unrecognized input");function L(k,y,te){var ae="",ie=(typeof k=="string"&&(k=JSON.parse(k)),typeof y=="string"&&(y=JSON.parse(y)),Array.isArray(k)&&0<k.length),_e=!Array.isArray(y[0]);if(ie&&p){for(var w=0;w<k.length;w++)0<w&&(ae+=d),ae+=O(k[w],w);0<y.length&&(ae+=P)}for(var M=0;M<y.length;M++){var U=(ie?k:y[M]).length,A=!1,re=ie?Object.keys(y[M]).length===0:y[M].length===0;if(te&&!ie&&(A=te==="greedy"?y[M].join("").trim()==="":y[M].length===1&&y[M][0].length===0),te==="greedy"&&ie){for(var se=[],J=0;J<U;J++){var ne=_e?k[J]:J;se.push(y[M][ne])}A=se.join("").trim()===""}if(!A){for(var H=0;H<U;H++){0<H&&!re&&(ae+=d);var pe=ie&&_e?k[H]:H;ae+=O(y[M][pe],H)}M<y.length-1&&(!te||0<U&&!re)&&(ae+=P)}}return ae}function O(k,y){var te,ae;return k==null?"":k.constructor===Date?JSON.stringify(k).slice(1,25):(ae=!1,D&&typeof k=="string"&&D.test(k)&&(k="'"+k,ae=!0),te=k.toString().replace(a,b),(ae=ae||s===!0||typeof s=="function"&&s(k,y)||Array.isArray(s)&&s[y]||((ie,_e)=>{for(var w=0;w<_e.length;w++)if(-1<ie.indexOf(_e[w]))return!0;return!1})(te,f.BAD_DELIMITERS)||-1<te.indexOf(d)||te.charAt(0)===" "||te.charAt(te.length-1)===" ")?K+te+K:te)}},f.RECORD_SEP="",f.UNIT_SEP="",f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!h&&!!l.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=10485760,f.RemoteChunkSize=5242880,f.DefaultDelimiter=",",f.Parser=T,f.ParserHandle=m,f.NetworkStreamer=B,f.FileStreamer=C,f.StringStreamer=F,f.ReadableStreamStreamer=u,l.jQuery&&((_=l.jQuery).fn.parse=function(t){var r=t.config||{},s=[];return this.each(function(P){if(!(_(this).prop("tagName").toUpperCase()==="INPUT"&&_(this).attr("type").toLowerCase()==="file"&&l.FileReader)||!this.files||this.files.length===0)return!0;for(var K=0;K<this.files.length;K++)s.push({file:this.files[K],inputElem:this,instanceConfig:_.extend({},r)})}),p(),this;function p(){if(s.length===0)x(t.complete)&&t.complete();else{var P,K,b,$,g=s[0];if(x(t.before)){var D=t.before(g.file,g.inputElem);if(typeof D=="object"){if(D.action==="abort")return P="AbortError",K=g.file,b=g.inputElem,$=D.reason,void(x(t.error)&&t.error({name:P},K,b,$));if(D.action==="skip")return void d();typeof D.config=="object"&&(g.instanceConfig=_.extend(g.instanceConfig,D.config))}else if(D==="skip")return void d()}var a=g.instanceConfig.complete;g.instanceConfig.complete=function(L){x(a)&&a(L,g.file,g.inputElem),d()},f.parse(g.file,g.instanceConfig)}}function d(){s.splice(0,1),p()}}),v&&(l.onmessage=function(t){t=t.data,f.WORKER_ID===void 0&&t&&(f.WORKER_ID=t.workerId),typeof t.input=="string"?l.postMessage({workerId:f.WORKER_ID,results:f.parse(t.input,t.config),finished:!0}):(l.File&&t.input instanceof File||t.input instanceof Object)&&(t=f.parse(t.input,t.config))&&l.postMessage({workerId:f.WORKER_ID,results:t,finished:!0})}),(B.prototype=Object.create(E.prototype)).constructor=B,(C.prototype=Object.create(E.prototype)).constructor=C,(F.prototype=Object.create(F.prototype)).constructor=F,(u.prototype=Object.create(E.prototype)).constructor=u,f})})(ot)),ot.exports}wn();var En=ce(`<div class="modal-overlay"><div class="modal-box"><h2>Welcome!</h2> <p>This simulation takes you through a "dating" strategy in which everyone is (mostly) satisfied with their final partner. In particular, no two people mutually prefer eachother over the pairing that the strategy generates. Look up the <a href="https://en.wikipedia.org/wiki/Gale%E2%80%93Shapley_algorithm" target="_blank" style="color:blueviolet">Gale-Shapley algorithm</a> for more details. <br/><br/> Type in any names (comma-separated) into the input boxes provided, and drag-and-drop names to customize preference rankings. When you're done, click <b>Lock In Preferences</b> and then <b>Next Step</b> until all candidates are paired! Proposals, rejections, breakups, and current engagements are logged in the top-right corner.<br/><br/> XOXO</p> <p style="line-height: 1rem; font-size: .8rem"><b>Notes:</b> functionality may vary when you input duplicate names; adding a girl will shuffle all boys' lists (and vice versa); all preference controls are disabled after you lock in your preferences, and they unlock when the algorithm terminates.</p> <button class="retro-btn exit">Close</button></div></div>`),xn=ce('<div class="warning">Warning: Duplicate names detected! No Polyamory Allowed!</div>'),Rn=ce('<div class="div1"><!></div>'),Sn=ce('<div class="div1"><!></div>'),On=ce('<!> <!> <br/> <div style="justify-self: center; margin-bottom: 3rem; align-items:center"><div class="list-input-wrapper">Top: <input class="list-input" placeholder="Enter names separated by commas"/></div> <div class="list-input-wrapper">Bottom: <input class="list-input" placeholder="Enter names separated by commas"/></div> <button class="info-btn">Info</button> <button class="info-btn" style="top: 5.25rem; z-index: 900">Shuffle</button></div> <br/><br/> <div class="boys"></div> <br/><br/> <div class="girls"></div> <br/><br/> <!> <!> <!>',1);function Fn(n,i){Ze(i,!1);const o=G(),l=G(),_=G();let h=G(),v=G(!1);Wt(()=>{I(h,new Audio(yn)),we(h,e(h).loop=!0),we(h,e(h).volume=.5),e(h).play()});let R=G(!0);function j(){e(h)?.play(),I(R,!e(R))}function f(a){let L=a.length;for(;L!=0;){let O=Math.floor(Math.random()*L);L--,[a[L],a[O]]=[a[O],a[L]]}return a}function E(){if(!e(v)){for(let a of e(u))we(c,e(c)[a]=f(e(C).slice()));for(let a of e(C))we(T,e(T)[a]=f(e(u).slice()))}}function B(a,L){if(!a||!L||a.length!==L.length)return!1;const O=new Set(a),k=new Set(L);for(const y of O)if(!k.has(y))return!1;return!0}let C=G(["Princess Peach"," Frodo"," Edna"," Ms. Bennet"]),F=G(e(C).join(",")),u=G(["Darth Vader"," Mr. Darcy"," SpongeBob"," Dory"]),m=G(e(u).join(",")),c=G({}),T=G({});Ce(()=>e(F),()=>{I(C,e(F).split(",").map(a=>a.trim().split(" ").map(L=>L.charAt(0).toUpperCase()+L.slice(1).toLowerCase()).join(" ")))}),Ce(()=>e(m),()=>{I(u,e(m).split(",").map(a=>a.trim().split(" ").map(L=>L.charAt(0).toUpperCase()+L.slice(1).toLowerCase()).join(" ")))}),Ce(()=>(e(u),e(c),e(C)),()=>{for(let a of e(u))a&&!e(c)[a]?we(c,e(c)[a]=f(e(C).slice())):a&&!B(e(C),e(c)[a])&&we(c,e(c)[a]=f(e(C).slice()));for(let a of Object.keys(e(c)))e(u).includes(a)||delete e(c)[a],I(c,{...e(c)})}),Ce(()=>(e(C),e(T),e(u)),()=>{for(let a of e(C))a&&!e(T)[a]?we(T,e(T)[a]=f(e(u).slice())):a&&!B(e(u),e(T)[a])&&we(T,e(T)[a]=f(e(u).slice()));for(let a of Object.keys(e(T)))e(C).includes(a)||delete e(T)[a],I(T,{...e(T)})}),Ce(()=>e(C),()=>{I(o,e(C).filter((a,L,O)=>O.indexOf(a)!==L))}),Ce(()=>e(u),()=>{I(l,e(u).filter((a,L,O)=>O.indexOf(a)!==L))}),Ce(()=>(e(o),e(l)),()=>{I(_,e(o).length>0||e(l).length>0)}),Tt(),Ot();var z=On(),Q=Ae(z);{var ee=a=>{var L=En();L.__click=j;var O=Z(L);O.__click=j;var k=X(Z(O),6);k.__click=j,W(O),W(L),Y(a,L)};me(Q,a=>{e(R)&&a(ee)})}var q=X(Q,2);{var S=a=>{var L=xn();Y(a,L)};me(q,a=>{e(_)&&a(S)})}var x=X(q,4),t=Z(x),r=X(Z(t));jt(r),W(t);var s=X(t,2),p=X(Z(s));jt(p),W(s);var d=X(s,2);d.__click=j;var P=X(d,2);P.__click=E,W(x);var K=X(x,5);Se(K,5,()=>(e(c),be(()=>Object.entries(e(c)))),Le,(a,L)=>{var O=He(()=>ft(e(L),2));let k=()=>e(O)[0],y=()=>e(O)[1];var te=Rn(),ae=Z(te);Bt(ae,{get size(){return y(),be(()=>y().length)},get name(){return k()},group:"boys",get pref(){return e(c)[k()]},set pref(ie){we(c,e(c)[k()]=ie)},get lockedIn(){return e(v)},set lockedIn(ie){I(v,ie)},$$legacy:!0}),W(te),Y(a,te)}),W(K);var b=X(K,5);Se(b,5,()=>(e(T),be(()=>Object.entries(e(T)))),Le,(a,L)=>{var O=He(()=>ft(e(L),2));let k=()=>e(O)[0],y=()=>e(O)[1];var te=Sn(),ae=Z(te);Bt(ae,{get size(){return y(),be(()=>y().length)},get name(){return k()},group:"girls",get pref(){return e(T)[k()]},set pref(ie){we(T,e(T)[k()]=ie)},get lockedIn(){return e(v)},set lockedIn(ie){I(v,ie)},$$legacy:!0}),W(te),Y(a,te)}),W(b);var $=X(b,5);Zr($,{});var g=X($,2);bn(g,{});var D=X(g,2);hn(D,{get boyPreferences(){return e(c)},get girlPreferences(){return e(T)},get boys(){return e(u)},get girls(){return e(C)},get lockedIn(){return e(v)},set lockedIn(a){I(v,a)},get audio(){return e(h)},set audio(a){I(h,a)},$$legacy:!0}),ue(()=>{r.disabled=e(v),p.disabled=e(v),ct(K,`grid-template-columns: repeat(${e(c),be(()=>e(c).length)??""}, 0fr);`),ct(b,`grid-template-columns: repeat(${e(T),be(()=>e(T).length)??""}, 0fr);`)}),Nt(r,()=>e(m),a=>I(m,a)),Nt(p,()=>e(F),a=>I(F,a)),Y(n,z),et()}Ct(["click"]);export{Fn as component};
