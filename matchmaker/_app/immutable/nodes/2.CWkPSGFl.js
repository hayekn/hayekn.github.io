import{b as tt,d as Ot,f as M,a as S,t as rt,c as me}from"../chunks/7VN89GSf.js";import{i as zt}from"../chunks/YhMguhKg.js";import{o as ut}from"../chunks/ORf0yv6i.js";import{e as dt,I as Ct,aL as _t,Q as Oe,h as K,a7 as we,J as He,w as e,a0 as Rt,M as Nt,O as $t,P as at,R as Me,i as pe,ad as pt,aE as Lt,f as Fe,s as Mt,aM as Ne,aN as $e,c as he,ap as st,aH as X,ah as it,aC as mt,aO as Dt,r as bt,p as Bt,aP as Pt,aQ as De,q as gt,d as ht,aR as jt,ae as yt,aS as Ht,aB as Ft,aT as Ut,Y as Ve,D as Y,aU as Wt,aF as Gt,az as Yt,K as qt,aV as Vt,aW as Xt,S as Kt,o as ce,aX as Jt,aY as Xe,aZ as Qt,n as ye,a_ as Zt,a$ as er,b0 as tr,aJ as rr,T as ar,b1 as sr,b2 as ir,B as Ee,aI as F,l as kt,C as J,F as O,X as x,H as R,G as A,E as xe,W as ue,aK as be,b3 as ze,b4 as _e,b5 as nr,b6 as fe}from"../chunks/BET8EcX4.js";import{a as or,d as Ke,s as ae}from"../chunks/DL_uDVGj.js";import{p as wt,b as Ue,i as V}from"../chunks/BQH7237I.js";import{s as Je,r as nt}from"../chunks/Binuwcsn.js";import{w as Qe}from"../chunks/BZcTkSF9.js";function ie(r,t){return t}function lr(r,t,a){for(var n=r.items,c=[],o=t.length,i=0;i<o;i++)Ht(t[i].e,c,!0);var v=o>0&&c.length===0&&a!==null;if(v){var m=a.parentNode;Ft(m),m.append(a),n.clear(),re(r,t[0].prev,t[o-1].next)}Ut(c,()=>{for(var _=0;_<o;_++){var g=t[_];v||(n.delete(g.k),re(r,g.prev,g.next)),ht(g.e,!v)}})}function ee(r,t,a,n,c,o=null){var i=r,v={flags:t,items:new Map,first:null},m=(t&_t)!==0;if(m){var _=r;i=K?Oe(we(_)):_.appendChild(dt())}K&&He();var g=null,k=!1,p=new Map,w=Rt(()=>{var u=a();return Dt(u)?u:u==null?[]:mt(u)}),f,b;function s(){vr(b,f,v,p,i,c,t,n,a),o!==null&&(f.length===0?g?bt(g):g=Fe(()=>o(i)):g!==null&&Bt(g,()=>{g=null}))}Ct(()=>{b??=Ve,f=e(w);var u=f.length;if(k&&u===0)return;k=u===0;let h=!1;if(K){var T=Nt(i)===$t;T!==(u===0)&&(i=at(),Oe(i),Me(!1),h=!0)}if(K){for(var N=null,z,d=0;d<u;d++){if(pe.nodeType===pt&&pe.data===Lt){i=pe,h=!0,Me(!1);break}var E=f[d],D=n(E,d);z=We(pe,v,N,null,E,D,d,c,t,a),v.items.set(D,z),N=z}u>0&&Oe(at())}if(K)u===0&&o&&(g=Fe(()=>o(i)));else if(Mt()){var j=new Set,Q=he;for(d=0;d<u;d+=1){E=f[d],D=n(E,d);var L=v.items.get(D)??p.get(D);L?(t&(Ne|$e))!==0&&Et(L,E,d,t):(z=We(null,v,null,null,E,D,d,c,t,a,!0),p.set(D,z)),j.add(D)}for(const[$,H]of v.items)j.has($)||Q.skipped_effects.add(H.e);Q.oncommit(s)}else s();h&&Me(!0),e(w)}),K&&(i=pe)}function vr(r,t,a,n,c,o,i,v,m){var _=(i&jt)!==0,g=(i&(Ne|$e))!==0,k=t.length,p=a.items,w=a.first,f=w,b,s=null,u,h=[],T=[],N,z,d,E;if(_)for(E=0;E<k;E+=1)N=t[E],z=v(N,E),d=p.get(z),d!==void 0&&(d.a?.measure(),(u??=new Set).add(d));for(E=0;E<k;E+=1){if(N=t[E],z=v(N,E),d=p.get(z),d===void 0){var D=n.get(z);if(D!==void 0){n.delete(z),p.set(z,D);var j=s?s.next:f;re(a,s,D),re(a,D,j),Be(D,j,c),s=D}else{var Q=f?f.e.nodes_start:c;s=We(Q,a,s,s===null?a.first:s.next,N,z,E,o,i,m)}p.set(z,s),h=[],T=[],f=s.next;continue}if(g&&Et(d,N,E,i),(d.e.f&De)!==0&&(bt(d.e),_&&(d.a?.unfix(),(u??=new Set).delete(d))),d!==f){if(b!==void 0&&b.has(d)){if(h.length<T.length){var L=T[0],$;s=L.prev;var H=h[0],Z=h[h.length-1];for($=0;$<h.length;$+=1)Be(h[$],L,c);for($=0;$<T.length;$+=1)b.delete(T[$]);re(a,H.prev,Z.next),re(a,s,H),re(a,Z,L),f=L,s=Z,E-=1,h=[],T=[]}else b.delete(d),Be(d,f,c),re(a,d.prev,d.next),re(a,d,s===null?a.first:s.next),re(a,s,d),s=d;continue}for(h=[],T=[];f!==null&&f.k!==z;)(f.e.f&De)===0&&(b??=new Set).add(f),T.push(f),f=f.next;if(f===null)continue;d=f}h.push(d),s=d,f=d.next}if(f!==null||b!==void 0){for(var G=b===void 0?[]:mt(b);f!==null;)(f.e.f&De)===0&&G.push(f),f=f.next;var I=G.length;if(I>0){var B=(i&_t)!==0&&k===0?c:null;if(_){for(E=0;E<I;E+=1)G[E].a?.measure();for(E=0;E<I;E+=1)G[E].a?.fix()}lr(a,G,B)}}_&&gt(()=>{if(u!==void 0)for(d of u)d.a?.apply()}),r.first=a.first&&a.first.e,r.last=s&&s.e;for(var U of n.values())ht(U.e);n.clear()}function Et(r,t,a,n){(n&Ne)!==0&&st(r.v,t),(n&$e)!==0?st(r.i,a):r.i=a}function We(r,t,a,n,c,o,i,v,m,_,g){var k=(m&Ne)!==0,p=(m&Pt)===0,w=k?p?X(c,!1,!1):it(c):c,f=(m&$e)===0?i:it(i),b={i:f,v:w,k:o,a:null,e:null,prev:a,next:n};try{if(r===null){var s=document.createDocumentFragment();s.append(r=dt())}return b.e=Fe(()=>v(r,w,f,_),K),b.e.prev=a&&a.e,b.e.next=n&&n.e,a===null?g||(t.first=b):(a.next=b,a.e.next=b.e),n!==null&&(n.prev=b,n.e.prev=b.e),b}finally{}}function Be(r,t,a){for(var n=r.next?r.next.e.nodes_start:a,c=t?t.e.nodes_start:a,o=r.e.nodes_start;o!==null&&o!==n;){var i=yt(o);c.before(o),o=i}}function re(r,t,a){t===null?r.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}function fr(r,t,a=!1,n=!1,c=!1){var o=r,i="";Y(()=>{var v=Ve;if(i===(i=t()??"")){K&&He();return}if(v.nodes_start!==null&&(Wt(v.nodes_start,v.nodes_end),v.nodes_start=v.nodes_end=null),i!==""){if(K){pe.data;for(var m=He(),_=m;m!==null&&(m.nodeType!==pt||m.data!=="");)_=m,m=yt(m);if(m===null)throw Gt(),Yt;tt(pe,_),o=Oe(m);return}var g=i+"";a?g=`<svg>${g}</svg>`:n&&(g=`<math>${g}</math>`);var k=Ot(g);if((a||n)&&(k=we(k)),tt(we(k),k.lastChild),a||n)for(;we(k);)o.before(we(k));else o.before(k)}})}function cr(r,t){return r==null?null:String(r)}function Ce(r,t,a,n){var c=r.__style;if(K||c!==t){var o=cr(t);(!K||o!==r.getAttribute("style"))&&(o==null?r.removeAttribute("style"):r.style.cssText=o),r.__style=t}return n}const ur=()=>performance.now(),ne={tick:r=>requestAnimationFrame(r),now:()=>ur(),tasks:new Set};function xt(){const r=ne.now();ne.tasks.forEach(t=>{t.c(r)||(ne.tasks.delete(t),t.f())}),ne.tasks.size!==0&&ne.tick(xt)}function dr(r){let t;return ne.tasks.size===0&&ne.tick(xt),{promise:new Promise(a=>{ne.tasks.add(t={c:r,f:a})}),abort(){ne.tasks.delete(t)}}}function Se(r,t){Xe(()=>{r.dispatchEvent(new CustomEvent(t))})}function _r(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const t=r.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function ot(r){const t={},a=r.split(";");for(const n of a){const[c,o]=n.split(":");if(!c||o===void 0)break;const i=_r(c.trim());t[i]=o.trim()}return t}const pr=r=>r;function Ze(r,t,a,n){var c=(r&Zt)!==0,o=(r&er)!==0,i=c&&o,v=(r&Jt)!==0,m=i?"both":c?"in":"out",_,g=t.inert,k=t.style.overflow,p,w;function f(){return Xe(()=>_??=a()(t,n?.()??{},{direction:m}))}var b={is_global:v,in(){if(t.inert=g,!c){w?.abort(),w?.reset?.();return}o||p?.abort(),Se(t,"introstart"),p=Ge(t,f(),w,1,()=>{Se(t,"introend"),p?.abort(),p=_=void 0,t.style.overflow=k})},out(T){if(!o){T?.(),_=void 0;return}t.inert=!0,Se(t,"outrostart"),w=Ge(t,f(),p,0,()=>{Se(t,"outroend"),T?.()})},stop:()=>{p?.abort(),w?.abort()}},s=Ve;if((s.transitions??=[]).push(b),c&&or){var u=v;if(!u){for(var h=s.parent;h&&(h.f&qt)!==0;)for(;(h=h.parent)&&(h.f&Vt)===0;);u=!h||(h.f&Xt)!==0}u&&Kt(()=>{ce(()=>b.in())})}}function Ge(r,t,a,n,c){var o=n===1;if(Qt(t)){var i,v=!1;return gt(()=>{if(!v){var s=t({direction:o?"in":"out"});i=Ge(r,s,a,n,c)}}),{abort:()=>{v=!0,i?.abort()},deactivate:()=>i.deactivate(),reset:()=>i.reset(),t:()=>i.t()}}if(a?.deactivate(),!t?.duration)return c(),{abort:ye,deactivate:ye,reset:ye,t:()=>n};const{delay:m=0,css:_,tick:g,easing:k=pr}=t;var p=[];if(o&&a===void 0&&(g&&g(0,1),_)){var w=ot(_(0,1));p.push(w,w)}var f=()=>1-n,b=r.animate(p,{duration:m,fill:"forwards"});return b.onfinish=()=>{b.cancel();var s=a?.t()??1-n;a?.abort();var u=n-s,h=t.duration*Math.abs(u),T=[];if(h>0){var N=!1;if(_)for(var z=Math.ceil(h/16.666666666666668),d=0;d<=z;d+=1){var E=s+u*k(d/z),D=ot(_(E,1-E));T.push(D),N||=D.overflow==="hidden"}N&&(r.style.overflow="hidden"),f=()=>{var j=b.currentTime;return s+u*k(j/h)},g&&dr(()=>{if(b.playState!=="running")return!1;var j=f();return g(j,1-j),!0})}b=r.animate(T,{duration:h,fill:"forwards"}),b.onfinish=()=>{f=()=>n,g?.(n,1-n),c()}},{abort:()=>{b&&(b.cancel(),b.effect=null,b.onfinish=ye)},deactivate:()=>{c=ye},reset:()=>{n===0&&g?.(1,0)},t:()=>f()}}function lt(r,t,a=t){var n=new WeakSet;tr(r,"input",async c=>{var o=c?r.defaultValue:r.value;if(o=Pe(r)?je(o):o,a(o),he!==null&&n.add(he),await rr(),o!==(o=t())){var i=r.selectionStart,v=r.selectionEnd,m=r.value.length;if(r.value=o??"",v!==null){var _=r.value.length;i===v&&v===m&&_>m?(r.selectionStart=_,r.selectionEnd=_):(r.selectionStart=i,r.selectionEnd=Math.min(v,_))}}}),(K&&r.defaultValue!==r.value||ce(t)==null&&r.value)&&(a(Pe(r)?je(r.value):r.value),he!==null&&n.add(he)),ar(()=>{var c=t();if(r===document.activeElement){var o=sr??he;if(n.has(o))return}Pe(r)&&c===je(r.value)||r.type==="date"&&!c&&!r.value||c!==r.value&&(r.value=c??"")})}function Pe(r){var t=r.type;return t==="number"||t==="range"}function je(r){return r===""?null:+r}function Ae(r,t){ir(window,["resize"],()=>Xe(()=>t(window[r])))}const Re=Qe({boys:{},girls:{}}),Ye=Qe([]),qe=Qe([]),mr=""+new URL("../assets/lovemailbox.BNs235_i.png",import.meta.url).href;var br=M('<div class="up svelte-27ckzk"><button>↑</button></div> <div class="down svelte-27ckzk"><button>↓</button></div>',1),gr=M('<div class="up svelte-27ckzk"><button>↑</button></div> <div class="down svelte-27ckzk"><button>↓</button></div>',1),hr=M('<div class="buttoncolumn svelte-27ckzk"><div class="names svelte-27ckzk"><!></div> <!></div>'),yr=M('<div class="title svelte-27ckzk"><img alt="mailbox" class="mailbox svelte-27ckzk"/> <span> </span></div> <div class="box"></div>',1);function vt(r,t){Ee(t,!0);let a=wt(t,"pref",15),n=F(0),c={x:30,y:-20},o=F(0),i=F(0),v=F(0),m=F(0);ut(()=>{window.scrollTo(0,0);const s=e(n).getBoundingClientRect();Re.update(u=>(u[t.group][t.name]={...s,left:s.left+c.x,top:s.top+c.y},u))}),kt(()=>{e(i),e(o),e(m),e(v),console.log("location");const s=e(n).getBoundingClientRect();Re.update(u=>(u[t.group][t.name]={...s,left:s.left+c.x,top:s.top+c.y},u))});function _(s,u){a(a().map((h,T)=>u===1?s>=a().length-1?h:T===s?a()[s+1]:T===s+1?a()[s]:h:s<=0?h:T===s?a()[s-1]:T===s-1?a()[s]:h))}var g=yr(),k=J(g),p=O(k);Ue(p,s=>x(n,s),()=>e(n));var w=R(p,2),f=O(w);A(w),A(k);var b=R(k,2);ee(b,21,a,ie,(s,u,h)=>{var T=hr(),N=O(T),z=O(N);{var d=L=>{var $=rt();Y(()=>ae($,`#${h+1} ${e(u)??""}`)),S(L,$)},E=L=>{var $=rt();Y(()=>ae($,`#${h+1}  ${e(u)??""}`)),S(L,$)};V(z,L=>{h===0?L(d):L(E,!1)})}A(N);var D=R(N,2);{var j=L=>{var $=br(),H=J($),Z=O(H);Z.__click=()=>_(h,-1),A(H);var G=R(H,2),I=O(G);I.__click=()=>_(h,1),A(G),S(L,$)},Q=L=>{var $=gr(),H=J($),Z=O(H);Z.__click=()=>{},A(H);var G=R(H,2),I=O(G);I.__click=()=>{},A(G),S(L,$)};V(D,L=>{t.lockedIn?L(Q,!1):L(j)})}A(T),S(s,T)}),A(b),Y(()=>{Je(p,"src",mr),ae(f,`${t.name??""}'s List`)}),Ae("innerHeight",s=>x(o,s,!0)),Ae("innerWidth",s=>x(i,s,!0)),Ae("outerHeight",s=>x(v,s,!0)),Ae("outerWidth",s=>x(m,s,!0)),S(r,g),xe()}Ke(["click"]);const kr=r=>r;function wr(r){const t=r-1;return t*t*t+1}function ft(r){const t=typeof r=="string"&&r.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[r,"px"]}function It(r,{delay:t=0,duration:a=400,easing:n=kr}={}){const c=+getComputedStyle(r).opacity;return{delay:t,duration:a,easing:n,css:o=>`opacity: ${o*c}`}}function Er(r,{delay:t=0,duration:a=400,easing:n=wr,x:c=0,y:o=0,opacity:i=0}={}){const v=getComputedStyle(r),m=+v.opacity,_=v.transform==="none"?"":v.transform,g=m*(1-i),[k,p]=ft(c),[w,f]=ft(o);return{delay:t,duration:a,easing:n,css:(b,s)=>`
			transform: ${_} translate(${(1-b)*k}${p}, ${(1-b)*w}${f});
			opacity: ${m-g*s}`}}var xr=M('<div class="envelope svelte-1vbmvhy">✉️</div>');function Ir(r,t){Ee(t,!0);let a=F(ue({boys:{},girls:{}})),n=F(ue([]));Re.subscribe(i=>x(a,i,!0)),Ye.subscribe(i=>x(n,i,!0));var c=me(),o=J(c);ee(o,17,()=>e(n),i=>i.id,(i,v)=>{var m=me(),_=J(m);{var g=k=>{const p=be(()=>e(a).boys[e(v).from]),w=be(()=>e(a).girls[e(v).to]);var f=xr();Y(()=>Ce(f,`left: ${e(w).left??""}px; top: ${e(w).top??""}px;`)),Ze(5,f,()=>Er,()=>({x:e(p).left-e(w).left,y:e(p).top-e(w).top,opacity:1,duration:800})),S(k,f)};V(_,k=>{e(a).boys[e(v).from]&&e(a).girls[e(v).to]&&k(g)})}S(i,m)}),S(r,c),xe()}function ct(r,t){const a=Date.now()+Math.random();console.log("[sendEnvelope] enqueue",r,"->",t,a),Ye.update(n=>[...n,{from:r,to:t,id:a}]),setTimeout(()=>{Ye.update(n=>n.filter(c=>c.id!==a)),console.log("[sendEnvelope] removed",a)},800)}function ke(r,t,a=800){r==="replaced"&&(a=1e3);const n=Date.now()+Math.random();console.log("[sendEffect]",r,t),qe.update(c=>[...c,{id:n,type:r,people:t}]),setTimeout(()=>{qe.update(c=>c.filter(o=>o.id!==n))},a)}const Tr=""+new URL("../assets/lotsofhearts.BNwOjjSl.gif",import.meta.url).href;var Sr=M('<div class="log-line svelte-14o7mzv"><!></div>'),Ar=M('<div class="log-line svelte-14o7mzv"> </div>'),Or=M('<button class="retro-btn start">Lock In Preferences</button>'),zr=M('<button class="retro-btn next">Next Step</button>'),Cr=M("<li> </li>"),Rr=M("<li> </li>"),Nr=M("<li> </li>"),$r=M("<li> </li>"),Lr=M('<div class="endscreen svelte-14o7mzv"><img class="background-gif svelte-14o7mzv" alt="Celebration"/> <div class="box svelte-14o7mzv" style="padding-inline: 2rem; padding-bottom: 1rem; text-align: center; z-index: 1; background: rgba(255, 255, 255, 0.95);"><ul class="svelte-14o7mzv"><!> <!> <!></ul> <button class="retro-btn next">Restart</button></div></div>'),Mr=M('<div class="log-container floating svelte-14o7mzv" style="left:5%;"><div class="log-box svelte-14o7mzv"><div class="log-line svelte-14o7mzv"><u>Activity Log:</u></div> <!></div></div> <div class="log-container floating svelte-14o7mzv" style="left: 22%; width: 8.5%;"><div class="log-box svelte-14o7mzv"><div class="log-line svelte-14o7mzv"><u>Engagements:</u></div> <!></div></div> <div class="button-panel"><!> <!></div> <!>',1);function Dr(r,t){Ee(t,!0);let a=wt(t,"lockedIn",15),n=F(ue([...t.boys])),c=F(ue({})),o=F(ue({})),i=F(0),v=F(0),m=F(!1),_=F(!1),g=F(ue([])),k,p,w=F(!1);function f(I){e(g).push("> "+I)}kt(()=>{e(w),k.scrollTo({top:k.scrollHeight,behavior:"smooth"}),p.scrollTo({top:p.scrollHeight,behavior:"smooth"})});function b(){x(g,[],!0),x(n,[...t.boys],!0),x(c,{},!0),x(o,{},!0),x(m,!1),x(_,!0),a(!a()),t.boys.forEach(I=>e(c)[I]=0)}function s(){x(_,!1),x(m,!1),x(g,[],!0),a(!a()),x(o,{},!0)}function u(){if(x(w,!e(w)),e(n).length===0){x(m,!0),x(_,!1);return}if(Object.entries(e(o)).length===t.girls.length){x(m,!0),x(_,!1);return}x(i,e(n)[0],!0),x(v,t.boyPreferences[e(i)][e(c)[e(i)]],!0),e(c)[e(i)]++,f(`${e(i)} proposes to ${e(v)}.`),ct(e(i),e(v));const I=e(o)[e(v)];if(!I)e(o)[e(v)]=e(i),e(n).shift(),ke("tentative",[e(i),e(v)]),f(`${e(v)} accepts ${e(i)}'s proposal.`);else{const B=t.girlPreferences[e(v)];B.indexOf(e(i))<B.indexOf(I)?(f(`${e(v)} dumps ${I} for ${e(i)}!`),e(o)[e(v)]=e(i),e(n)[0]=I,ke("replaced",[I]),ke("tentative",[e(i),e(v)])):(f(`${e(v)} rejects ${e(i)}.`),ct(e(v),e(i)),x(w,!e(w)),ke("rejector",[e(v)]),ke("rejected",[e(i)]))}}var h=Mr(),T=J(h),N=O(T),z=R(O(N),2);ee(z,17,()=>e(g),ie,(I,B)=>{var U=Sr(),se=O(U);fr(se,()=>e(B)),A(U),S(I,U)}),A(N),Ue(N,I=>k=I,()=>k),A(T);var d=R(T,2),E=O(d),D=R(O(E),2);ee(D,17,()=>Object.entries(e(o)),ie,(I,B)=>{var U=be(()=>ze(e(B),2));let se=()=>e(U)[0],oe=()=>e(U)[1];var le=Ar(),l=O(le);A(le),Y(()=>ae(l,`${se()??""} + ${oe()??""}`)),S(I,le)}),A(E),Ue(E,I=>p=I,()=>p),A(d);var j=R(d,2),Q=O(j);{var L=I=>{var B=Or();B.__click=b,S(I,B)};V(Q,I=>{e(_)||I(L)})}var $=R(Q,2);{var H=I=>{var B=zr();B.__click=u,S(I,B)};V($,I=>{e(_)&&!e(m)&&I(H)})}A(j);var Z=R(j,2);{var G=I=>{var B=Lr(),U=O(B),se=R(U,2),oe=O(se),le=O(oe);ee(le,17,()=>Object.entries(e(o)),ie,(P,q,W,ve)=>{var te=be(()=>ze(e(q),2));let Ie=()=>e(te)[0],Te=()=>e(te)[1];var et=me(),Tt=J(et);{var St=ge=>{var de=Cr(),Le=O(de);A(de),Y(()=>ae(Le,`${Ie()??""} 💞 ${Te()??""}`)),S(ge,de)},At=ge=>{var de=Rr(),Le=O(de);A(de),Y(()=>ae(Le,`${Ie()??""} ❤️ ${Te()??""}`)),S(ge,de)};V(Tt,ge=>{t.girlPreferences[Ie()][0]===Te()&&Ie()===t.boyPreferences[Te()][0]?ge(St):ge(At,!1)})}S(P,et)});var l=R(le,2);ee(l,17,()=>t.girls.filter(P=>!Object.keys(e(o)).includes(P)),ie,(P,q)=>{var W=Nr(),ve=O(W);A(W),Y(()=>ae(ve,`${e(q)??""} 😞`)),S(P,W)});var y=R(l,2);ee(y,17,()=>t.boys.filter(P=>!Object.values(e(o)).includes(P)),ie,(P,q)=>{var W=$r(),ve=O(W);A(W),Y(()=>ae(ve,`${e(q)??""} 😞`)),S(P,W)}),A(oe);var C=R(oe,2);C.__click=s,A(se),A(B),Y(()=>Je(U,"src",Tr)),Ze(3,B,()=>It),S(I,B)};V(Z,I=>{e(m)&&I(G)})}S(r,h),xe()}Ke(["click"]);const Br=""+new URL("../assets/heart.Bpr07Mgz.gif",import.meta.url).href,Pr=""+new URL("../assets/crying.CHRd97a5.gif",import.meta.url).href,jr=""+new URL("../assets/breakup.D_EuIFF7.gif",import.meta.url).href,Hr=""+new URL("../assets/rejected.DapKlnpD.gif",import.meta.url).href;var Fr=M('<img class="effect svelte-cps1d0" alt="gifs"/>');function Ur(r,t){Ee(t,!0);let a=F(ue([])),n=F(ue({boys:{},girls:{}}));qe.subscribe(v=>x(a,v,!0)),Re.subscribe(v=>x(n,v,!0));const c={tentative:Br,replaced:jr,rejector:Hr,rejected:Pr};var o=me(),i=J(o);ee(i,17,()=>e(a),v=>v.id,(v,m)=>{var _=me(),g=J(_);{var k=p=>{var w=me(),f=J(w);ee(f,17,()=>e(m).people,ie,(b,s)=>{var u=me(),h=J(u);{var T=N=>{const z=be(()=>e(n).boys[e(s)]||e(n).girls[e(s)]);var d=Fr();Y(()=>{Je(d,"src",c[e(m).type]),Ce(d,`left:${e(z).left+20}px; top:${e(z).top+100}px;`)}),Ze(7,d,()=>It,()=>({duration:800})),S(N,d)};V(h,N=>{(e(n).boys[e(s)]||e(n).girls[e(s)])&&N(T)})}S(b,u)}),S(p,w)};V(g,p=>{e(m).people&&p(k)})}S(v,_)}),S(r,o),xe()}const Wr=""+new URL("../assets/titanic.B2rvjAN8.mp3",import.meta.url).href;var Gr=M(`<div class="modal-overlay"><div class="modal-box"><h2>Welcome!</h2> <p>This simulation takes you through a dating strategy in which everyone is (mostly) satisfied with their final choice of partner. In particular, no two people mutually prefer eachother over the pairing that the strategy generates. Look up the <a href="https://en.wikipedia.org/wiki/Gale%E2%80%93Shapley_algorithm" target="_blank" style="color:blueviolet">Gale-Shapley algorithm</a> for more details. <br/><br/> Type in any names (comma-separated) in the input boxes provided, and hover over the candidates' lists to be able to customize their preference rankings. When you're done, click "Lock In Preferences" and then "Next Step" until all candidates are paired! Proposals, rejections, breakups, and current engagements are logged in the top-right corner.<br/><br/> XOXO</p> <p style="line-height: 1rem; font-size: .8rem"><b>Notes:</b> functionality may vary when you input duplicate names; adding a girl will shuffle all boys' lists (and vice versa); all controls but "Next Step" are disabled after you lock in your preferences, and they unlock when the algorithm terminates.</p> <button class="retro-btn exit">Close</button></div></div>`),Yr=M('<div class="warning">Warning: Duplicate names detected! No Polyamory Allowed!</div>'),qr=M('<input class="list-input" placeholder="Enter names separated by commas"/>'),Vr=M('<div class="list-input"> </div>'),Xr=M('<input class="list-input" placeholder="Enter names separated by commas"/>'),Kr=M('<div class="list-input"> </div>'),Jr=M('<div class="div1"><!></div>'),Qr=M('<div class="div1"><!></div>'),Zr=M('<button class="info-btn">Info</button> <button class="info-btn" style="top: 5.25rem; z-index: 900">Shuffle</button> <!> <!> <br/> <div class="list-input-wrapper">GIRLS: <!></div> <div class="list-input-wrapper">BOYS: <!></div> <br/><br/> <div class="boys"></div> <br/><br/> <div class="girls"></div> <br/><br/> <!> <!> <!>',1);function la(r,t){Ee(t,!1);const a=X(),n=X(),c=X();let o,i=X(!1);ut(()=>{o=new Audio(Wr),o.loop=!0,o.volume=.5,o.play()});let v=X(!0);function m(){o?.play(),x(v,!e(v))}function _(l){let y=l.length;for(;y!=0;){let C=Math.floor(Math.random()*y);y--,[l[y],l[C]]=[l[C],l[y]]}return l}function g(){if(!e(i)){for(let l of e(f))fe(s,e(s)[l]=_(e(p).slice()));for(let l of e(p))fe(u,e(u)[l]=_(e(f).slice()))}}function k(l,y){if(!l||!y||l.length!==y.length)return!1;const C=new Set(l),P=new Set(y);for(const q of C)if(!P.has(q))return!1;return!0}let p=X(["Alice","Bella","Cecilia","Daisy"]),w=X(e(p).join(",")),f=X(["Alex","Bob","Chris","Daniel"]),b=X(e(f).join(",")),s=X({}),u=X({});_e(()=>e(w),()=>{x(p,e(w).split(",").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()))}),_e(()=>e(b),()=>{x(f,e(b).split(",").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()))}),_e(()=>(e(f),e(s),e(p)),()=>{for(let l of e(f))l&&!e(s)[l]?fe(s,e(s)[l]=_(e(p).slice())):l&&!k(e(p),e(s)[l])&&fe(s,e(s)[l]=_(e(p).slice()));for(let l of Object.keys(e(s)))e(f).includes(l)||delete e(s)[l],x(s,{...e(s)})}),_e(()=>(e(p),e(u),e(f)),()=>{for(let l of e(p))l&&!e(u)[l]?fe(u,e(u)[l]=_(e(f).slice())):l&&!k(e(f),e(u)[l])&&fe(u,e(u)[l]=_(e(f).slice()));for(let l of Object.keys(e(u)))e(p).includes(l)||delete e(u)[l],x(u,{...e(u)})}),_e(()=>e(p),()=>{x(a,e(p).filter((l,y,C)=>C.indexOf(l)!==y))}),_e(()=>e(f),()=>{x(n,e(f).filter((l,y,C)=>C.indexOf(l)!==y))}),_e(()=>(e(a),e(n)),()=>{x(c,e(a).length>0||e(n).length>0)}),nr(),zt();var h=Zr(),T=J(h);T.__click=m;var N=R(T,2);N.__click=g;var z=R(N,2);{var d=l=>{var y=Gr();y.__click=m;var C=O(y);C.__click=m;var P=R(O(C),6);P.__click=m,A(C),A(y),S(l,y)};V(z,l=>{e(v)&&l(d)})}var E=R(z,2);{var D=l=>{var y=Yr();S(l,y)};V(E,l=>{e(c)&&l(D)})}var j=R(E,4),Q=R(O(j));{var L=l=>{var y=qr();nt(y),lt(y,()=>e(w),C=>x(w,C)),S(l,y)},$=l=>{var y=Vr(),C=O(y,!0);A(y),Y(()=>ae(C,e(w))),S(l,y)};V(Q,l=>{e(i)?l($,!1):l(L)})}A(j);var H=R(j,2),Z=R(O(H));{var G=l=>{var y=Xr();nt(y),lt(y,()=>e(b),C=>x(b,C)),S(l,y)},I=l=>{var y=Kr(),C=O(y,!0);A(y),Y(()=>ae(C,e(b))),S(l,y)};V(Z,l=>{e(i)?l(I,!1):l(G)})}A(H);var B=R(H,5);ee(B,5,()=>(e(s),ce(()=>Object.entries(e(s)))),ie,(l,y)=>{var C=be(()=>ze(e(y),2));let P=()=>e(C)[0],q=()=>e(C)[1];var W=Jr(),ve=O(W);vt(ve,{get size(){return q(),ce(()=>q().length)},get name(){return P()},group:"boys",get pref(){return e(s)[P()]},set pref(te){fe(s,e(s)[P()]=te)},get lockedIn(){return e(i)},set lockedIn(te){x(i,te)},$$legacy:!0}),A(W),S(l,W)}),A(B);var U=R(B,5);ee(U,5,()=>(e(u),ce(()=>Object.entries(e(u)))),ie,(l,y)=>{var C=be(()=>ze(e(y),2));let P=()=>e(C)[0],q=()=>e(C)[1];var W=Qr(),ve=O(W);vt(ve,{get size(){return q(),ce(()=>q().length)},get name(){return P()},group:"girls",get pref(){return e(u)[P()]},set pref(te){fe(u,e(u)[P()]=te)},get lockedIn(){return e(i)},set lockedIn(te){x(i,te)},$$legacy:!0}),A(W),S(l,W)}),A(U);var se=R(U,5);Ir(se,{});var oe=R(se,2);Ur(oe,{});var le=R(oe,2);Dr(le,{get boyPreferences(){return e(s)},get girlPreferences(){return e(u)},get boys(){return e(f)},get girls(){return e(p)},get lockedIn(){return e(i)},set lockedIn(l){x(i,l)},$$legacy:!0}),Y(()=>{Ce(B,`grid-template-columns: repeat(${e(s),ce(()=>e(s).length)??""}, 1fr);`),Ce(U,`grid-template-columns: repeat(${e(u),ce(()=>e(u).length)??""}, 1fr);`)}),S(r,h),xe()}Ke(["click"]);export{la as component};
