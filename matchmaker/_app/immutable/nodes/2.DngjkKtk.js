import{b as qe,d as wt,f as D,a as C,t as Ve,c as ie}from"../chunks/BMUnLzRb.js";import{i as Et}from"../chunks/CaXMV-nk.js";import{o as st}from"../chunks/3fXL37Wm.js";import{e as it,I as kt,aK as nt,Q as we,h as U,a7 as pe,J as Ne,w as e,Y as xt,M as Tt,O as At,P as Ke,R as $e,i as se,ad as ot,aD as St,f as ze,s as $t,aL as Te,aM as Ae,c as ve,ao as Xe,aG as G,ag as Je,aB as lt,aN as Ot,r as ft,p as Ct,aO as Rt,aP as Oe,q as vt,d as ct,aQ as It,ae as ut,aR as Nt,aA as zt,aS as Lt,a0 as Fe,D as W,aT as Dt,aE as Mt,ay as Bt,K as Pt,aU as Ft,aV as Ht,S as Ut,o as Q,aW as jt,aX as dt,aY as Gt,n as de,aZ as Wt,a_ as Yt,a$ as qt,aI as Vt,T as Kt,b0 as Xt,B as me,aH as P,l as _t,C as q,F as N,_ as T,H as I,G as $,E as ge,Z,aJ as oe,b1 as Ee,b2 as ae,b3 as Jt,b4 as fe}from"../chunks/DPL6Fa3C.js";import{a as Qt,d as He,s as ce}from"../chunks/VPHZimXy.js";import{p as Zt,b as Le,i as V}from"../chunks/DwDx7ygc.js";import{s as Ue,r as Qe}from"../chunks/CVBjYtJ_.js";import{w as je}from"../chunks/CpCijC2F.js";function ne(r,t){return t}function er(r,t,a){for(var n=r.items,f=[],i=t.length,l=0;l<i;l++)Nt(t[l].e,f,!0);var u=i>0&&f.length===0&&a!==null;if(u){var p=a.parentNode;zt(p),p.append(a),n.clear(),Y(r,t[0].prev,t[i-1].next)}Lt(f,()=>{for(var g=0;g<i;g++){var _=t[g];u||(n.delete(_.k),Y(r,_.prev,_.next)),ct(_.e,!u)}})}function J(r,t,a,n,f,i=null){var l=r,u={flags:t,items:new Map,first:null},p=(t&nt)!==0;if(p){var g=r;l=U?we(pe(g)):g.appendChild(it())}U&&Ne();var _=null,y=!1,v=new Map,b=xt(()=>{var k=a();return Ot(k)?k:k==null?[]:lt(k)}),o,c;function m(){tr(c,o,u,v,l,f,t,n,a),i!==null&&(o.length===0?_?ft(_):_=ze(()=>i(l)):_!==null&&Ct(_,()=>{_=null}))}kt(()=>{c??=Fe,o=e(b);var k=o.length;if(y&&k===0)return;y=k===0;let w=!1;if(U){var O=Tt(l)===At;O!==(k===0)&&(l=Ke(),we(l),$e(!1),w=!0)}if(U){for(var R=null,A,d=0;d<k;d++){if(se.nodeType===ot&&se.data===St){l=se,w=!0,$e(!1);break}var E=o[d],x=n(E,d);A=De(se,u,R,null,E,x,d,f,t,a),u.items.set(x,A),R=A}k>0&&we(Ke())}if(U)k===0&&i&&(_=ze(()=>i(l)));else if($t()){var z=new Set,j=ve;for(d=0;d<k;d+=1){E=o[d],x=n(E,d);var B=u.items.get(x)??v.get(x);B?(t&(Te|Ae))!==0&&pt(B,E,d,t):(A=De(null,u,null,null,E,x,d,f,t,a,!0),v.set(x,A)),z.add(x)}for(const[M,K]of u.items)z.has(M)||j.skipped_effects.add(K.e);j.oncommit(m)}else m();w&&$e(!0),e(b)}),U&&(l=se)}function tr(r,t,a,n,f,i,l,u,p){var g=(l&It)!==0,_=(l&(Te|Ae))!==0,y=t.length,v=a.items,b=a.first,o=b,c,m=null,k,w=[],O=[],R,A,d,E;if(g)for(E=0;E<y;E+=1)R=t[E],A=u(R,E),d=v.get(A),d!==void 0&&(d.a?.measure(),(k??=new Set).add(d));for(E=0;E<y;E+=1){if(R=t[E],A=u(R,E),d=v.get(A),d===void 0){var x=n.get(A);if(x!==void 0){n.delete(A),v.set(A,x);var z=m?m.next:o;Y(a,m,x),Y(a,x,z),Ce(x,z,f),m=x}else{var j=o?o.e.nodes_start:f;m=De(j,a,m,m===null?a.first:m.next,R,A,E,i,l,p)}v.set(A,m),w=[],O=[],o=m.next;continue}if(_&&pt(d,R,E,l),(d.e.f&Oe)!==0&&(ft(d.e),g&&(d.a?.unfix(),(k??=new Set).delete(d))),d!==o){if(c!==void 0&&c.has(d)){if(w.length<O.length){var B=O[0],M;m=B.prev;var K=w[0],ee=w[w.length-1];for(M=0;M<w.length;M+=1)Ce(w[M],B,f);for(M=0;M<O.length;M+=1)c.delete(O[M]);Y(a,K.prev,ee.next),Y(a,m,K),Y(a,ee,B),o=B,m=ee,E-=1,w=[],O=[]}else c.delete(d),Ce(d,o,f),Y(a,d.prev,d.next),Y(a,d,m===null?a.first:m.next),Y(a,m,d),m=d;continue}for(w=[],O=[];o!==null&&o.k!==A;)(o.e.f&Oe)===0&&(c??=new Set).add(o),O.push(o),o=o.next;if(o===null)continue;d=o}w.push(d),m=d,o=d.next}if(o!==null||c!==void 0){for(var s=c===void 0?[]:lt(c);o!==null;)(o.e.f&Oe)===0&&s.push(o),o=o.next;var h=s.length;if(h>0){var S=(l&nt)!==0&&y===0?f:null;if(g){for(E=0;E<h;E+=1)s[E].a?.measure();for(E=0;E<h;E+=1)s[E].a?.fix()}er(a,s,S)}}g&&vt(()=>{if(k!==void 0)for(d of k)d.a?.apply()}),r.first=a.first&&a.first.e,r.last=m&&m.e;for(var L of n.values())ct(L.e);n.clear()}function pt(r,t,a,n){(n&Te)!==0&&Xe(r.v,t),(n&Ae)!==0?Xe(r.i,a):r.i=a}function De(r,t,a,n,f,i,l,u,p,g,_){var y=(p&Te)!==0,v=(p&Rt)===0,b=y?v?G(f,!1,!1):Je(f):f,o=(p&Ae)===0?l:Je(l),c={i:o,v:b,k:i,a:null,e:null,prev:a,next:n};try{if(r===null){var m=document.createDocumentFragment();m.append(r=it())}return c.e=ze(()=>u(r,b,o,g),U),c.e.prev=a&&a.e,c.e.next=n&&n.e,a===null?_||(t.first=c):(a.next=c,a.e.next=c.e),n!==null&&(n.prev=c,n.e.prev=c.e),c}finally{}}function Ce(r,t,a){for(var n=r.next?r.next.e.nodes_start:a,f=t?t.e.nodes_start:a,i=r.e.nodes_start;i!==null&&i!==n;){var l=ut(i);f.before(i),i=l}}function Y(r,t,a){t===null?r.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}function rr(r,t,a=!1,n=!1,f=!1){var i=r,l="";W(()=>{var u=Fe;if(l===(l=t()??"")){U&&Ne();return}if(u.nodes_start!==null&&(Dt(u.nodes_start,u.nodes_end),u.nodes_start=u.nodes_end=null),l!==""){if(U){se.data;for(var p=Ne(),g=p;p!==null&&(p.nodeType!==ot||p.data!=="");)g=p,p=ut(p);if(p===null)throw Mt(),Bt;qe(se,g),i=we(p);return}var _=l+"";a?_=`<svg>${_}</svg>`:n&&(_=`<math>${_}</math>`);var y=wt(_);if((a||n)&&(y=pe(y)),qe(pe(y),y.lastChild),a||n)for(;pe(y);)i.before(pe(y));else i.before(y)}})}function ar(r,t){return r==null?null:String(r)}function ke(r,t,a,n){var f=r.__style;if(U||f!==t){var i=ar(t);(!U||i!==r.getAttribute("style"))&&(i==null?r.removeAttribute("style"):r.style.cssText=i),r.__style=t}return n}const sr=()=>performance.now(),X={tick:r=>requestAnimationFrame(r),now:()=>sr(),tasks:new Set};function mt(){const r=X.now();X.tasks.forEach(t=>{t.c(r)||(X.tasks.delete(t),t.f())}),X.tasks.size!==0&&X.tick(mt)}function ir(r){let t;return X.tasks.size===0&&X.tick(mt),{promise:new Promise(a=>{X.tasks.add(t={c:r,f:a})}),abort(){X.tasks.delete(t)}}}function ye(r,t){dt(()=>{r.dispatchEvent(new CustomEvent(t))})}function nr(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const t=r.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function Ze(r){const t={},a=r.split(";");for(const n of a){const[f,i]=n.split(":");if(!f||i===void 0)break;const l=nr(f.trim());t[l]=i.trim()}return t}const or=r=>r;function Ge(r,t,a,n){var f=(r&Wt)!==0,i=(r&Yt)!==0,l=f&&i,u=(r&jt)!==0,p=l?"both":f?"in":"out",g,_=t.inert,y=t.style.overflow,v,b;function o(){return dt(()=>g??=a()(t,n?.()??{},{direction:p}))}var c={is_global:u,in(){if(t.inert=_,!f){b?.abort(),b?.reset?.();return}i||v?.abort(),ye(t,"introstart"),v=Me(t,o(),b,1,()=>{ye(t,"introend"),v?.abort(),v=g=void 0,t.style.overflow=y})},out(O){if(!i){O?.(),g=void 0;return}t.inert=!0,ye(t,"outrostart"),b=Me(t,o(),v,0,()=>{ye(t,"outroend"),O?.()})},stop:()=>{v?.abort(),b?.abort()}},m=Fe;if((m.transitions??=[]).push(c),f&&Qt){var k=u;if(!k){for(var w=m.parent;w&&(w.f&Pt)!==0;)for(;(w=w.parent)&&(w.f&Ft)===0;);k=!w||(w.f&Ht)!==0}k&&Ut(()=>{Q(()=>c.in())})}}function Me(r,t,a,n,f){var i=n===1;if(Gt(t)){var l,u=!1;return vt(()=>{if(!u){var m=t({direction:i?"in":"out"});l=Me(r,m,a,n,f)}}),{abort:()=>{u=!0,l?.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(a?.deactivate(),!t?.duration)return f(),{abort:de,deactivate:de,reset:de,t:()=>n};const{delay:p=0,css:g,tick:_,easing:y=or}=t;var v=[];if(i&&a===void 0&&(_&&_(0,1),g)){var b=Ze(g(0,1));v.push(b,b)}var o=()=>1-n,c=r.animate(v,{duration:p,fill:"forwards"});return c.onfinish=()=>{c.cancel();var m=a?.t()??1-n;a?.abort();var k=n-m,w=t.duration*Math.abs(k),O=[];if(w>0){var R=!1;if(g)for(var A=Math.ceil(w/16.666666666666668),d=0;d<=A;d+=1){var E=m+k*y(d/A),x=Ze(g(E,1-E));O.push(x),R||=x.overflow==="hidden"}R&&(r.style.overflow="hidden"),o=()=>{var z=c.currentTime;return m+k*y(z/w)},_&&ir(()=>{if(c.playState!=="running")return!1;var z=o();return _(z,1-z),!0})}c=r.animate(O,{duration:w,fill:"forwards"}),c.onfinish=()=>{o=()=>n,_?.(n,1-n),f()}},{abort:()=>{c&&(c.cancel(),c.effect=null,c.onfinish=de)},deactivate:()=>{f=de},reset:()=>{n===0&&_?.(1,0)},t:()=>o()}}function et(r,t,a=t){var n=new WeakSet;qt(r,"input",async f=>{var i=f?r.defaultValue:r.value;if(i=Re(r)?Ie(i):i,a(i),ve!==null&&n.add(ve),await Vt(),i!==(i=t())){var l=r.selectionStart,u=r.selectionEnd,p=r.value.length;if(r.value=i??"",u!==null){var g=r.value.length;l===u&&u===p&&g>p?(r.selectionStart=g,r.selectionEnd=g):(r.selectionStart=l,r.selectionEnd=Math.min(u,g))}}}),(U&&r.defaultValue!==r.value||Q(t)==null&&r.value)&&(a(Re(r)?Ie(r.value):r.value),ve!==null&&n.add(ve)),Kt(()=>{var f=t();if(r===document.activeElement){var i=Xt??ve;if(n.has(i))return}Re(r)&&f===Ie(r.value)||r.type==="date"&&!f&&!r.value||f!==r.value&&(r.value=f??"")})}function Re(r){var t=r.type;return t==="number"||t==="range"}function Ie(r){return r===""?null:+r}const xe=je({boys:{},girls:{}}),Be=je([]),Pe=je([]),lr=""+new URL("../assets/lovemailbox.BNs235_i.png",import.meta.url).href;var fr=D('<div class="buttoncolumn svelte-27ckzk"><div class="names svelte-27ckzk"><!></div> <div class="up svelte-27ckzk"><button>↑</button></div> <div class="down svelte-27ckzk"><button>↓</button></div></div>'),vr=D('<div class="title svelte-27ckzk"><img alt="mailbox" class="mailbox svelte-27ckzk"/> <span> </span></div> <div class="box"></div>',1);function tt(r,t){me(t,!0);let a=Zt(t,"pref",15),n=P(0),f={x:30,y:-20};st(()=>{window.scrollTo(0,0);const v=e(n).getBoundingClientRect();xe.update(b=>(b[t.group][t.name]={...v,left:v.left+f.x,top:v.top+f.y},b))}),_t(()=>{const v=e(n).getBoundingClientRect();xe.update(b=>(b[t.group][t.name]={...v,left:v.left+f.x,top:v.top+f.y},b))});function i(v,b){a(a().map((o,c)=>b===1?v>=a().length-1?o:c===v?a()[v+1]:c===v+1?a()[v]:o:v<=0?o:c===v?a()[v-1]:c===v-1?a()[v]:o))}var l=vr(),u=q(l),p=N(u);Le(p,v=>T(n,v),()=>e(n));var g=I(p,2),_=N(g);$(g),$(u);var y=I(u,2);J(y,21,a,ne,(v,b,o)=>{var c=fr(),m=N(c),k=N(m);{var w=x=>{var z=Ve();W(()=>ce(z,`#${o+1} ${e(b)??""}`)),C(x,z)},O=x=>{var z=Ve();W(()=>ce(z,`#${o+1}  ${e(b)??""}`)),C(x,z)};V(k,x=>{o===0?x(w):x(O,!1)})}$(m);var R=I(m,2),A=N(R);A.__click=()=>i(o,-1),$(R);var d=I(R,2),E=N(d);E.__click=()=>i(o,1),$(d),$(c),C(v,c)}),$(y),W(()=>{Ue(p,"src",lr),ce(_,`${t.name??""}'s List`)}),C(r,l),ge()}He(["click"]);const cr=r=>r;function ur(r){const t=r-1;return t*t*t+1}function rt(r){const t=typeof r=="string"&&r.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[r,"px"]}function gt(r,{delay:t=0,duration:a=400,easing:n=cr}={}){const f=+getComputedStyle(r).opacity;return{delay:t,duration:a,easing:n,css:i=>`opacity: ${i*f}`}}function dr(r,{delay:t=0,duration:a=400,easing:n=ur,x:f=0,y:i=0,opacity:l=0}={}){const u=getComputedStyle(r),p=+u.opacity,g=u.transform==="none"?"":u.transform,_=p*(1-l),[y,v]=rt(f),[b,o]=rt(i);return{delay:t,duration:a,easing:n,css:(c,m)=>`
			transform: ${g} translate(${(1-c)*y}${v}, ${(1-c)*b}${o});
			opacity: ${p-_*m}`}}var _r=D('<div class="envelope svelte-1vbmvhy">✉️</div>');function pr(r,t){me(t,!0);let a=P(Z({boys:{},girls:{}})),n=P(Z([]));xe.subscribe(l=>T(a,l,!0)),Be.subscribe(l=>T(n,l,!0));var f=ie(),i=q(f);J(i,17,()=>e(n),l=>l.id,(l,u)=>{var p=ie(),g=q(p);{var _=y=>{const v=oe(()=>e(a).boys[e(u).from]),b=oe(()=>e(a).girls[e(u).to]);var o=_r();W(()=>ke(o,`left: ${e(b).left??""}px; top: ${e(b).top??""}px;`)),Ge(5,o,()=>dr,()=>({x:e(v).left-e(b).left,y:e(v).top-e(b).top,opacity:1,duration:800})),C(y,o)};V(g,y=>{e(a).boys[e(u).from]&&e(a).girls[e(u).to]&&y(_)})}C(l,p)}),C(r,f),ge()}function at(r,t){const a=Date.now()+Math.random();console.log("[sendEnvelope] enqueue",r,"->",t,a),Be.update(n=>[...n,{from:r,to:t,id:a}]),setTimeout(()=>{Be.update(n=>n.filter(f=>f.id!==a)),console.log("[sendEnvelope] removed",a)},800)}function _e(r,t,a=800){r==="replaced"&&(a=1e3);const n=Date.now()+Math.random();console.log("[sendEffect]",r,t),Pe.update(f=>[...f,{id:n,type:r,people:t}]),setTimeout(()=>{Pe.update(f=>f.filter(i=>i.id!==n))},a)}const mr=""+new URL("../assets/lotsofhearts.BNwOjjSl.gif",import.meta.url).href;var gr=D('<div class="log-line svelte-14o7mzv"><!></div>'),br=D('<div class="log-line svelte-14o7mzv"> </div>'),hr=D('<button class="retro-btn start">Lock In Preferences</button>'),yr=D('<button class="retro-btn next">Next Step</button>'),wr=D("<li> </li>"),Er=D("<li> </li>"),kr=D('<div class="endscreen svelte-14o7mzv"><img class="background-gif svelte-14o7mzv" alt="Celebration"/> <div class="box svelte-14o7mzv" style="padding-inline: 2rem; padding-bottom: 1rem; text-align: center; z-index: 1; background: rgba(255, 255, 255, 0.95);"><ul class="svelte-14o7mzv"></ul> <button class="retro-btn next">Restart</button></div></div>'),xr=D('<div class="log-container floating svelte-14o7mzv" style="left:5%;"><div class="log-box svelte-14o7mzv"><div class="log-line svelte-14o7mzv"><u>Activity Log:</u></div> <!></div></div> <div class="log-container floating svelte-14o7mzv" style="left: 22%; width: 8.5%;"><div class="log-box svelte-14o7mzv"><div class="log-line svelte-14o7mzv"><u>Engagements:</u></div> <!></div></div> <div class="button-panel"><!> <!></div> <!>',1);function Tr(r,t){me(t,!0);let a=P(Z([...t.boys])),n=P(Z({})),f=P(Z({})),i=P(0),l=P(0),u=P(!1),p=P(!1),g=P(Z([])),_,y,v=P(!1);function b(s){e(g).push("> "+s)}_t(()=>{e(v),_.scrollTo({top:_.scrollHeight,behavior:"smooth"}),y.scrollTo({top:y.scrollHeight,behavior:"smooth"})});function o(){T(g,[],!0),T(a,[...t.boys],!0),T(n,{},!0),T(f,{},!0),T(u,!1),T(p,!0),t.boys.forEach(s=>e(n)[s]=0)}function c(){T(p,!1),T(u,!1),T(g,[],!0),T(f,{},!0)}function m(){if(T(v,!e(v)),e(a).length===0){T(u,!0),T(p,!1);return}T(i,e(a)[0],!0),T(l,t.boyPreferences[e(i)][e(n)[e(i)]],!0),e(n)[e(i)]++,b(`${e(i)} proposes to ${e(l)}.`),at(e(i),e(l));const s=e(f)[e(l)];if(!s)e(f)[e(l)]=e(i),e(a).shift(),_e("tentative",[e(i),e(l)]),b(`${e(l)} accepts ${e(i)}'s proposal.`);else{const h=t.girlPreferences[e(l)];h.indexOf(e(i))<h.indexOf(s)?(b(`${e(l)} dumps ${s} for ${e(i)}!`),e(f)[e(l)]=e(i),e(a)[0]=s,_e("replaced",[s]),_e("tentative",[e(i),e(l)])):(b(`${e(l)} rejects ${e(i)}.`),at(e(l),e(i)),T(v,!e(v)),_e("rejector",[e(l)]),_e("rejected",[e(i)]))}}var k=xr(),w=q(k),O=N(w),R=I(N(O),2);J(R,17,()=>e(g),ne,(s,h)=>{var S=gr(),L=N(S);rr(L,()=>e(h)),$(S),C(s,S)}),$(O),Le(O,s=>_=s,()=>_),$(w);var A=I(w,2),d=N(A),E=I(N(d),2);J(E,17,()=>Object.entries(e(f)),ne,(s,h)=>{var S=oe(()=>Ee(e(h),2));let L=()=>e(S)[0],F=()=>e(S)[1];var H=br(),te=N(H);$(H),W(()=>ce(te,`${L()??""} + ${F()??""}`)),C(s,H)}),$(d),Le(d,s=>y=s,()=>y),$(A);var x=I(A,2),z=N(x);{var j=s=>{var h=hr();h.__click=o,C(s,h)};V(z,s=>{e(p)||s(j)})}var B=I(z,2);{var M=s=>{var h=yr();h.__click=m,C(s,h)};V(B,s=>{e(p)&&!e(u)&&s(M)})}$(x);var K=I(x,2);{var ee=s=>{var h=kr(),S=N(h),L=I(S,2),F=N(L);J(F,21,()=>Object.entries(e(f)),ne,(te,ue,Br,Pr)=>{var We=oe(()=>Ee(e(ue),2));let be=()=>e(We)[0],he=()=>e(We)[1];var Ye=ie(),bt=q(Ye);{var ht=le=>{var re=wr(),Se=N(re);$(re),W(()=>ce(Se,`${be()??""} 💞 ${he()??""}`)),C(le,re)},yt=le=>{var re=Er(),Se=N(re);$(re),W(()=>ce(Se,`${be()??""} ❤️ ${he()??""}`)),C(le,re)};V(bt,le=>{t.girlPreferences[be()][0]===he()&&be()===t.boyPreferences[he()][0]?le(ht):le(yt,!1)})}C(te,Ye)}),$(F);var H=I(F,2);H.__click=c,$(L),$(h),W(()=>Ue(S,"src",mr)),Ge(3,h,()=>gt),C(s,h)};V(K,s=>{e(u)&&s(ee)})}C(r,k),ge()}He(["click"]);const Ar=""+new URL("../assets/heart.Bpr07Mgz.gif",import.meta.url).href,Sr=""+new URL("../assets/crying.CHRd97a5.gif",import.meta.url).href,$r=""+new URL("../assets/breakup.D_EuIFF7.gif",import.meta.url).href,Or=""+new URL("../assets/rejected.DapKlnpD.gif",import.meta.url).href;var Cr=D('<img class="effect svelte-cps1d0" alt="gifs"/>');function Rr(r,t){me(t,!0);let a=P(Z([])),n=P(Z({boys:{},girls:{}}));Pe.subscribe(u=>T(a,u,!0)),xe.subscribe(u=>T(n,u,!0));const f={tentative:Ar,replaced:$r,rejector:Or,rejected:Sr};var i=ie(),l=q(i);J(l,17,()=>e(a),u=>u.id,(u,p)=>{var g=ie(),_=q(g);{var y=v=>{var b=ie(),o=q(b);J(o,17,()=>e(p).people,ne,(c,m)=>{var k=ie(),w=q(k);{var O=R=>{const A=oe(()=>e(n).boys[e(m)]||e(n).girls[e(m)]);var d=Cr();W(()=>{Ue(d,"src",f[e(p).type]),ke(d,`left:${e(A).left+20}px; top:${e(A).top+100}px;`)}),Ge(7,d,()=>gt,()=>({duration:800})),C(R,d)};V(w,R=>{(e(n).boys[e(m)]||e(n).girls[e(m)])&&R(O)})}C(c,k)}),C(v,b)};V(_,v=>{e(p).people&&v(y)})}C(u,g)}),C(r,i),ge()}const Ir=""+new URL("../assets/titanic.B2rvjAN8.mp3",import.meta.url).href;var Nr=D(`<div class="modal-overlay"><div class="modal-box"><h3>Instructions</h3> <p>Welcome! This love machine will pair people up such that no two people prefer eachother over the machine's choice. Look up the <a href="https://en.wikipedia.org/wiki/Gale%E2%80%93Shapley_algorithm" target="_blank">Gale-Shapley algorithm</a> for more details. <br/><br/> Type in any names (comma-separated) in the input boxes provided, and hover over the candidates' lists to be able to customize their preference rankings. When you're done, lock in your setup, and click "Next Step" till a final matching is generated! Events and current engagements are logged in the top-right corner. Note that duplicate names are not allowed. <br/><br/> XOXO</p> <button class="retro-btn exit">Close</button></div></div>`),zr=D('<div class="warning">Warning: Duplicate names detected! No Polyamory Allowed!</div>'),Lr=D('<div class="div1"><!></div>'),Dr=D('<div class="div1"><!></div>'),Mr=D('<button class="info-btn">Info</button> <!> <!> <br/> <div class="list-input-wrapper">GIRLS: <input class="list-input" placeholder="Enter names separated by commas"/></div> <div class="list-input-wrapper">BOYS: <input class="list-input" placeholder="Enter names separated by commas"/></div><br/><br/> <div class="boys"></div> <br/><br/> <div class="girls"></div> <br/><br/> <!> <!> <!>',1);function Vr(r,t){me(t,!1);const a=G(),n=G(),f=G();let i;st(()=>{i=new Audio(Ir),i.loop=!0,i.volume=.5,i.play()});let l=G(!0);function u(){i?.play(),T(l,!e(l))}function p(s){let h=s.length;for(;h!=0;){let S=Math.floor(Math.random()*h);h--,[s[h],s[S]]=[s[S],s[h]]}return s}function g(s,h){if(!s||!h||s.length!==h.length)return!1;const S=new Set(s),L=new Set(h);for(const F of S)if(!L.has(F))return!1;return!0}let _=G(["Alice","Bella","Cecilia","Daisy"]),y=G(e(_).join(",")),v=G(["Alex","Bob","Chris","Daniel"]),b=G(e(v).join(",")),o=G({}),c=G({});ae(()=>e(y),()=>{T(_,e(y).split(",").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()))}),ae(()=>e(b),()=>{T(v,e(b).split(",").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()))}),ae(()=>(e(v),e(o),e(_)),()=>{for(let s of e(v))s&&!e(o)[s]?fe(o,e(o)[s]=p(e(_).slice())):s&&!g(e(_),e(o)[s])&&fe(o,e(o)[s]=p(e(_).slice()));for(let s of Object.keys(e(o)))e(v).includes(s)||delete e(o)[s],T(o,{...e(o)})}),ae(()=>(e(_),e(c),e(v)),()=>{for(let s of e(_))s&&!e(c)[s]?fe(c,e(c)[s]=p(e(v).slice())):s&&!g(e(v),e(c)[s])&&fe(c,e(c)[s]=p(e(v).slice()));for(let s of Object.keys(e(c)))e(_).includes(s)||delete e(c)[s],T(c,{...e(c)})}),ae(()=>e(_),()=>{T(a,e(_).filter((s,h,S)=>S.indexOf(s)!==h))}),ae(()=>e(v),()=>{T(n,e(v).filter((s,h,S)=>S.indexOf(s)!==h))}),ae(()=>(e(a),e(n)),()=>{T(f,e(a).length>0||e(n).length>0)}),Jt(),Et();var m=Mr(),k=q(m);k.__click=u;var w=I(k,2);{var O=s=>{var h=Nr();h.__click=u;var S=N(h);S.__click=u;var L=I(N(S),4);L.__click=u,$(S),$(h),C(s,h)};V(w,s=>{e(l)&&s(O)})}var R=I(w,2);{var A=s=>{var h=zr();C(s,h)};V(R,s=>{e(f)&&s(A)})}var d=I(R,4),E=I(N(d));Qe(E),$(d);var x=I(d,2),z=I(N(x));Qe(z),$(x);var j=I(x,4);J(j,5,()=>(e(o),Q(()=>Object.entries(e(o)))),ne,(s,h)=>{var S=oe(()=>Ee(e(h),2));let L=()=>e(S)[0],F=()=>e(S)[1];var H=Lr(),te=N(H);tt(te,{get size(){return F(),Q(()=>F().length)},get name(){return L()},group:"boys",get pref(){return e(o)[L()]},set pref(ue){fe(o,e(o)[L()]=ue)},$$legacy:!0}),$(H),C(s,H)}),$(j);var B=I(j,5);J(B,5,()=>(e(c),Q(()=>Object.entries(e(c)))),ne,(s,h)=>{var S=oe(()=>Ee(e(h),2));let L=()=>e(S)[0],F=()=>e(S)[1];var H=Dr(),te=N(H);tt(te,{get size(){return F(),Q(()=>F().length)},get name(){return L()},group:"girls",get pref(){return e(c)[L()]},set pref(ue){fe(c,e(c)[L()]=ue)},$$legacy:!0}),$(H),C(s,H)}),$(B);var M=I(B,5);pr(M,{});var K=I(M,2);Rr(K,{});var ee=I(K,2);Tr(ee,{get boyPreferences(){return e(o)},get girlPreferences(){return e(c)},get boys(){return e(v)},get girls(){return e(_)}}),W(()=>{ke(j,`grid-template-columns: repeat(${e(o),Q(()=>e(o).length)??""}, 1fr);`),ke(B,`grid-template-columns: repeat(${e(c),Q(()=>e(c).length)??""}, 1fr);`)}),et(E,()=>e(y),s=>T(y,s)),et(z,()=>e(b),s=>T(b,s)),C(r,m),ge()}He(["click"]);export{Vr as component};
