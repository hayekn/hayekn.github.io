import{b as it,d as Rt,f as D,a as T,t as nt,c as be}from"../chunks/7VN89GSf.js";import{i as Nt}from"../chunks/YhMguhKg.js";import{o as pt}from"../chunks/ORf0yv6i.js";import{e as bt,I as $t,aL as gt,Q as Ce,h as K,a7 as Ee,J as Ue,w as e,a0 as Lt,M as Mt,O as Dt,P as ot,R as Be,i as pe,ad as ht,aE as Bt,f as We,s as Pt,aM as Le,aN as Me,c as ye,ap as lt,aH as q,ah as vt,aC as yt,aO as jt,r as kt,p as Ht,aP as Ft,aQ as Pe,q as wt,d as Et,aR as Ut,ae as xt,aS as Wt,aB as Gt,aT as Yt,Y as Je,D as W,aU as qt,aF as Vt,az as Xt,K as Kt,aV as Jt,aW as Qt,S as Zt,o as ue,aX as er,aY as Qe,aZ as tr,n as ke,a_ as rr,a$ as ar,b0 as sr,aJ as ir,T as nr,b1 as or,b2 as lr,B as xe,aI as H,l as It,C as J,F as C,X as k,H as R,G as I,E as Ie,W as de,aK as ge,b3 as Re,b4 as me,b5 as vr,b6 as re}from"../chunks/BET8EcX4.js";import{a as fr,d as Ze,s as se}from"../chunks/DL_uDVGj.js";import{p as Ge,b as Ye,i as V}from"../chunks/BQH7237I.js";import{s as et,r as ft}from"../chunks/Binuwcsn.js";import{w as tt}from"../chunks/BZcTkSF9.js";function oe(r,t){return t}function cr(r,t,a){for(var i=r.items,c=[],l=t.length,o=0;o<l;o++)Wt(t[o].e,c,!0);var v=l>0&&c.length===0&&a!==null;if(v){var d=a.parentNode;Gt(d),d.append(a),i.clear(),ae(r,t[0].prev,t[l-1].next)}Yt(c,()=>{for(var _=0;_<l;_++){var g=t[_];v||(i.delete(g.k),ae(r,g.prev,g.next)),Et(g.e,!v)}})}function te(r,t,a,i,c,l=null){var o=r,v={flags:t,items:new Map,first:null},d=(t&gt)!==0;if(d){var _=r;o=K?Ce(Ee(_)):_.appendChild(bt())}K&&Ue();var g=null,w=!1,b=new Map,E=Lt(()=>{var u=a();return jt(u)?u:u==null?[]:yt(u)}),f,m;function s(){ur(m,f,v,b,o,c,t,i,a),l!==null&&(f.length===0?g?kt(g):g=We(()=>l(o)):g!==null&&Ht(g,()=>{g=null}))}$t(()=>{m??=Je,f=e(E);var u=f.length;if(w&&u===0)return;w=u===0;let y=!1;if(K){var S=Mt(o)===Dt;S!==(u===0)&&(o=ot(),Ce(o),Be(!1),y=!0)}if(K){for(var N=null,z,p=0;p<u;p++){if(pe.nodeType===ht&&pe.data===Bt){o=pe,y=!0,Be(!1);break}var x=f[p],M=i(x,p);z=qe(pe,v,N,null,x,M,p,c,t,a),v.items.set(M,z),N=z}u>0&&Ce(ot())}if(K)u===0&&l&&(g=We(()=>l(o)));else if(Pt()){var P=new Set,X=ye;for(p=0;p<u;p+=1){x=f[p],M=i(x,p);var $=v.items.get(M)??b.get(M);$?(t&(Le|Me))!==0&&Tt($,x,p,t):(z=qe(null,v,null,null,x,M,p,c,t,a,!0),b.set(M,z)),P.add(M)}for(const[L,j]of v.items)P.has(L)||X.skipped_effects.add(j.e);X.oncommit(s)}else s();y&&Be(!0),e(E)}),K&&(o=pe)}function ur(r,t,a,i,c,l,o,v,d){var _=(o&Ut)!==0,g=(o&(Le|Me))!==0,w=t.length,b=a.items,E=a.first,f=E,m,s=null,u,y=[],S=[],N,z,p,x;if(_)for(x=0;x<w;x+=1)N=t[x],z=v(N,x),p=b.get(z),p!==void 0&&(p.a?.measure(),(u??=new Set).add(p));for(x=0;x<w;x+=1){if(N=t[x],z=v(N,x),p=b.get(z),p===void 0){var M=i.get(z);if(M!==void 0){i.delete(z),b.set(z,M);var P=s?s.next:f;ae(a,s,M),ae(a,M,P),je(M,P,c),s=M}else{var X=f?f.e.nodes_start:c;s=qe(X,a,s,s===null?a.first:s.next,N,z,x,l,o,d)}b.set(z,s),y=[],S=[],f=s.next;continue}if(g&&Tt(p,N,x,o),(p.e.f&Pe)!==0&&(kt(p.e),_&&(p.a?.unfix(),(u??=new Set).delete(p))),p!==f){if(m!==void 0&&m.has(p)){if(y.length<S.length){var $=S[0],L;s=$.prev;var j=y[0],Q=y[y.length-1];for(L=0;L<y.length;L+=1)je(y[L],$,c);for(L=0;L<S.length;L+=1)m.delete(S[L]);ae(a,j.prev,Q.next),ae(a,s,j),ae(a,Q,$),f=$,s=Q,x-=1,y=[],S=[]}else m.delete(p),je(p,f,c),ae(a,p.prev,p.next),ae(a,p,s===null?a.first:s.next),ae(a,s,p),s=p;continue}for(y=[],S=[];f!==null&&f.k!==z;)(f.e.f&Pe)===0&&(m??=new Set).add(f),S.push(f),f=f.next;if(f===null)continue;p=f}y.push(p),s=p,f=p.next}if(f!==null||m!==void 0){for(var U=m===void 0?[]:yt(m);f!==null;)(f.e.f&Pe)===0&&U.push(f),f=f.next;var Z=U.length;if(Z>0){var ve=(o&gt)!==0&&w===0?c:null;if(_){for(x=0;x<Z;x+=1)U[x].a?.measure();for(x=0;x<Z;x+=1)U[x].a?.fix()}cr(a,U,ve)}}_&&wt(()=>{if(u!==void 0)for(p of u)p.a?.apply()}),r.first=a.first&&a.first.e,r.last=s&&s.e;for(var fe of i.values())Et(fe.e);i.clear()}function Tt(r,t,a,i){(i&Le)!==0&&lt(r.v,t),(i&Me)!==0?lt(r.i,a):r.i=a}function qe(r,t,a,i,c,l,o,v,d,_,g){var w=(d&Le)!==0,b=(d&Ft)===0,E=w?b?q(c,!1,!1):vt(c):c,f=(d&Me)===0?o:vt(o),m={i:f,v:E,k:l,a:null,e:null,prev:a,next:i};try{if(r===null){var s=document.createDocumentFragment();s.append(r=bt())}return m.e=We(()=>v(r,E,f,_),K),m.e.prev=a&&a.e,m.e.next=i&&i.e,a===null?g||(t.first=m):(a.next=m,a.e.next=m.e),i!==null&&(i.prev=m,i.e.prev=m.e),m}finally{}}function je(r,t,a){for(var i=r.next?r.next.e.nodes_start:a,c=t?t.e.nodes_start:a,l=r.e.nodes_start;l!==null&&l!==i;){var o=xt(l);c.before(l),l=o}}function ae(r,t,a){t===null?r.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}function dr(r,t,a=!1,i=!1,c=!1){var l=r,o="";W(()=>{var v=Je;if(o===(o=t()??"")){K&&Ue();return}if(v.nodes_start!==null&&(qt(v.nodes_start,v.nodes_end),v.nodes_start=v.nodes_end=null),o!==""){if(K){pe.data;for(var d=Ue(),_=d;d!==null&&(d.nodeType!==ht||d.data!=="");)_=d,d=xt(d);if(d===null)throw Vt(),Xt;it(pe,_),l=Ce(d);return}var g=o+"";a?g=`<svg>${g}</svg>`:i&&(g=`<math>${g}</math>`);var w=Rt(g);if((a||i)&&(w=Ee(w)),it(Ee(w),w.lastChild),a||i)for(;Ee(w);)l.before(Ee(w));else l.before(w)}})}function _r(r,t){return r==null?null:String(r)}function Ne(r,t,a,i){var c=r.__style;if(K||c!==t){var l=_r(t);(!K||l!==r.getAttribute("style"))&&(l==null?r.removeAttribute("style"):r.style.cssText=l),r.__style=t}return i}const mr=()=>performance.now(),le={tick:r=>requestAnimationFrame(r),now:()=>mr(),tasks:new Set};function St(){const r=le.now();le.tasks.forEach(t=>{t.c(r)||(le.tasks.delete(t),t.f())}),le.tasks.size!==0&&le.tick(St)}function pr(r){let t;return le.tasks.size===0&&le.tick(St),{promise:new Promise(a=>{le.tasks.add(t={c:r,f:a})}),abort(){le.tasks.delete(t)}}}function Oe(r,t){Qe(()=>{r.dispatchEvent(new CustomEvent(t))})}function br(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const t=r.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function ct(r){const t={},a=r.split(";");for(const i of a){const[c,l]=i.split(":");if(!c||l===void 0)break;const o=br(c.trim());t[o]=l.trim()}return t}const gr=r=>r;function rt(r,t,a,i){var c=(r&rr)!==0,l=(r&ar)!==0,o=c&&l,v=(r&er)!==0,d=o?"both":c?"in":"out",_,g=t.inert,w=t.style.overflow,b,E;function f(){return Qe(()=>_??=a()(t,i?.()??{},{direction:d}))}var m={is_global:v,in(){if(t.inert=g,!c){E?.abort(),E?.reset?.();return}l||b?.abort(),Oe(t,"introstart"),b=Ve(t,f(),E,1,()=>{Oe(t,"introend"),b?.abort(),b=_=void 0,t.style.overflow=w})},out(S){if(!l){S?.(),_=void 0;return}t.inert=!0,Oe(t,"outrostart"),E=Ve(t,f(),b,0,()=>{Oe(t,"outroend"),S?.()})},stop:()=>{b?.abort(),E?.abort()}},s=Je;if((s.transitions??=[]).push(m),c&&fr){var u=v;if(!u){for(var y=s.parent;y&&(y.f&Kt)!==0;)for(;(y=y.parent)&&(y.f&Jt)===0;);u=!y||(y.f&Qt)!==0}u&&Zt(()=>{ue(()=>m.in())})}}function Ve(r,t,a,i,c){var l=i===1;if(tr(t)){var o,v=!1;return wt(()=>{if(!v){var s=t({direction:l?"in":"out"});o=Ve(r,s,a,i,c)}}),{abort:()=>{v=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(a?.deactivate(),!t?.duration)return c(),{abort:ke,deactivate:ke,reset:ke,t:()=>i};const{delay:d=0,css:_,tick:g,easing:w=gr}=t;var b=[];if(l&&a===void 0&&(g&&g(0,1),_)){var E=ct(_(0,1));b.push(E,E)}var f=()=>1-i,m=r.animate(b,{duration:d,fill:"forwards"});return m.onfinish=()=>{m.cancel();var s=a?.t()??1-i;a?.abort();var u=i-s,y=t.duration*Math.abs(u),S=[];if(y>0){var N=!1;if(_)for(var z=Math.ceil(y/16.666666666666668),p=0;p<=z;p+=1){var x=s+u*w(p/z),M=ct(_(x,1-x));S.push(M),N||=M.overflow==="hidden"}N&&(r.style.overflow="hidden"),f=()=>{var P=m.currentTime;return s+u*w(P/y)},g&&pr(()=>{if(m.playState!=="running")return!1;var P=f();return g(P,1-P),!0})}m=r.animate(S,{duration:y,fill:"forwards"}),m.onfinish=()=>{f=()=>i,g?.(i,1-i),c()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=ke)},deactivate:()=>{c=ke},reset:()=>{i===0&&g?.(1,0)},t:()=>f()}}function ut(r,t,a=t){var i=new WeakSet;sr(r,"input",async c=>{var l=c?r.defaultValue:r.value;if(l=He(r)?Fe(l):l,a(l),ye!==null&&i.add(ye),await ir(),l!==(l=t())){var o=r.selectionStart,v=r.selectionEnd,d=r.value.length;if(r.value=l??"",v!==null){var _=r.value.length;o===v&&v===d&&_>d?(r.selectionStart=_,r.selectionEnd=_):(r.selectionStart=o,r.selectionEnd=Math.min(v,_))}}}),(K&&r.defaultValue!==r.value||ue(t)==null&&r.value)&&(a(He(r)?Fe(r.value):r.value),ye!==null&&i.add(ye)),nr(()=>{var c=t();if(r===document.activeElement){var l=or??ye;if(i.has(l))return}He(r)&&c===Fe(r.value)||r.type==="date"&&!c&&!r.value||c!==r.value&&(r.value=c??"")})}function He(r){var t=r.type;return t==="number"||t==="range"}function Fe(r){return r===""?null:+r}function ze(r,t){lr(window,["resize"],()=>Qe(()=>t(window[r])))}const $e=tt({boys:{},girls:{}}),Xe=tt([]),Ke=tt([]),hr=""+new URL("../assets/lovemailbox.BNs235_i.png",import.meta.url).href;var yr=D('<div class="up svelte-27ckzk"><button>‚Üë</button></div> <div class="down svelte-27ckzk"><button>‚Üì</button></div>',1),kr=D('<div class="up svelte-27ckzk"><button>‚Üë</button></div> <div class="down svelte-27ckzk"><button>‚Üì</button></div>',1),wr=D('<div class="buttoncolumn svelte-27ckzk"><div class="names svelte-27ckzk"><!></div> <!></div>'),Er=D('<div class="title svelte-27ckzk"><img alt="mailbox" class="mailbox svelte-27ckzk"/> <span> </span></div> <div class="box"></div>',1);function dt(r,t){xe(t,!0);let a=Ge(t,"pref",15),i=H(0),c={x:30,y:-20},l=H(0),o=H(0),v=H(0),d=H(0);pt(()=>{window.scrollTo(0,0);const s=e(i).getBoundingClientRect();$e.update(u=>(u[t.group][t.name]={...s,left:s.left+c.x,top:s.top+c.y},u))}),It(()=>{e(o),e(l),e(d),e(v),console.log("location");const s=e(i).getBoundingClientRect();$e.update(u=>(u[t.group][t.name]={...s,left:s.left+c.x,top:s.top+c.y},u))});function _(s,u){a(a().map((y,S)=>u===1?s>=a().length-1?y:S===s?a()[s+1]:S===s+1?a()[s]:y:s<=0?y:S===s?a()[s-1]:S===s-1?a()[s]:y))}var g=Er(),w=J(g),b=C(w);Ye(b,s=>k(i,s),()=>e(i));var E=R(b,2),f=C(E);I(E),I(w);var m=R(w,2);te(m,21,a,oe,(s,u,y)=>{var S=wr(),N=C(S),z=C(N);{var p=$=>{var L=nt();W(()=>se(L,`#${y+1} ${e(u)??""}`)),T($,L)},x=$=>{var L=nt();W(()=>se(L,`#${y+1}  ${e(u)??""}`)),T($,L)};V(z,$=>{y===0?$(p):$(x,!1)})}I(N);var M=R(N,2);{var P=$=>{var L=yr(),j=J(L),Q=C(j);Q.__click=()=>_(y,-1),I(j);var U=R(j,2),Z=C(U);Z.__click=()=>_(y,1),I(U),T($,L)},X=$=>{var L=kr(),j=J(L),Q=C(j);Q.__click=()=>{},I(j);var U=R(j,2),Z=C(U);Z.__click=()=>{},I(U),T($,L)};V(M,$=>{t.lockedIn?$(X,!1):$(P)})}I(S),T(s,S)}),I(m),W(()=>{et(b,"src",hr),se(f,`${t.name??""}'s List`)}),ze("innerHeight",s=>k(l,s,!0)),ze("innerWidth",s=>k(o,s,!0)),ze("outerHeight",s=>k(v,s,!0)),ze("outerWidth",s=>k(d,s,!0)),T(r,g),Ie()}Ze(["click"]);const xr=r=>r;function Ir(r){const t=r-1;return t*t*t+1}function _t(r){const t=typeof r=="string"&&r.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[r,"px"]}function At(r,{delay:t=0,duration:a=400,easing:i=xr}={}){const c=+getComputedStyle(r).opacity;return{delay:t,duration:a,easing:i,css:l=>`opacity: ${l*c}`}}function Tr(r,{delay:t=0,duration:a=400,easing:i=Ir,x:c=0,y:l=0,opacity:o=0}={}){const v=getComputedStyle(r),d=+v.opacity,_=v.transform==="none"?"":v.transform,g=d*(1-o),[w,b]=_t(c),[E,f]=_t(l);return{delay:t,duration:a,easing:i,css:(m,s)=>`
			transform: ${_} translate(${(1-m)*w}${b}, ${(1-m)*E}${f});
			opacity: ${d-g*s}`}}var Sr=D('<div class="envelope svelte-1vbmvhy">‚úâÔ∏è</div>');function Ar(r,t){xe(t,!0);let a=H(de({boys:{},girls:{}})),i=H(de([]));$e.subscribe(o=>k(a,o,!0)),Xe.subscribe(o=>k(i,o,!0));var c=be(),l=J(c);te(l,17,()=>e(i),o=>o.id,(o,v)=>{var d=be(),_=J(d);{var g=w=>{const b=ge(()=>e(a).boys[e(v).from]),E=ge(()=>e(a).girls[e(v).to]);var f=Sr();W(()=>Ne(f,`left: ${e(E).left??""}px; top: ${e(E).top??""}px;`)),rt(5,f,()=>Tr,()=>({x:e(b).left-e(E).left,y:e(b).top-e(E).top,opacity:1,duration:800})),T(w,f)};V(_,w=>{e(a).boys[e(v).from]&&e(a).girls[e(v).to]&&w(g)})}T(o,d)}),T(r,c),Ie()}function mt(r,t){const a=Date.now()+Math.random();console.log("[sendEnvelope] enqueue",r,"->",t,a),Xe.update(i=>[...i,{from:r,to:t,id:a}]),setTimeout(()=>{Xe.update(i=>i.filter(c=>c.id!==a)),console.log("[sendEnvelope] removed",a)},800)}function we(r,t,a=800){r==="replaced"&&(a=1e3);const i=Date.now()+Math.random();console.log("[sendEffect]",r,t),Ke.update(c=>[...c,{id:i,type:r,people:t}]),setTimeout(()=>{Ke.update(c=>c.filter(l=>l.id!==i))},a)}const Or=""+new URL("../assets/lotsofhearts.BNwOjjSl.gif",import.meta.url).href;var zr=D('<div class="log-line svelte-14o7mzv"><!></div>'),Cr=D('<div class="log-line svelte-14o7mzv"> </div>'),Rr=D('<button class="retro-btn start">Lock In Preferences</button>'),Nr=D('<button class="retro-btn next">Next Step</button>'),$r=D("<li> </li>"),Lr=D("<li> </li>"),Mr=D("<li> </li>"),Dr=D("<li> </li>"),Br=D('<div class="endscreen svelte-14o7mzv"><img class="background-gif svelte-14o7mzv" alt="Celebration"/> <div class="box svelte-14o7mzv" style="padding-inline: 2rem; padding-bottom: 1rem; text-align: center; z-index: 1; background: rgba(255, 255, 255, 0.95);"><ul class="svelte-14o7mzv"><!> <!> <!></ul> <button class="retro-btn next">Restart</button></div></div>'),Pr=D('<div class="log-container floating svelte-14o7mzv" style="left:5%;"><div class="log-box svelte-14o7mzv"><div class="log-line svelte-14o7mzv"><u>Activity Log:</u></div> <!></div></div> <div class="log-container floating svelte-14o7mzv" style="left: 22%; width: 8.5%;"><div class="log-box svelte-14o7mzv"><div class="log-line svelte-14o7mzv"><u>Engagements:</u></div> <!></div></div> <div class="button-panel-wrapper"><div class="button-panel"><!> <!></div> <a class="info-btn-side" href="https://nicholashayek.com/">&#8617;</a> <button class="info-btn-side" style="margin-left:3rem">&#128263;</button></div> <!>',1);function jr(r,t){xe(t,!0);let a=Ge(t,"lockedIn",15),i=Ge(t,"audio",15),c=H(de([...t.boys])),l=H(de({})),o=H(de({})),v=H(0),d=H(0),_=H(!1),g=H(!1),w=H(de([])),b,E,f=H(!1);function m(O){e(w).push("> "+O)}It(()=>{e(f),b.scrollTo({top:b.scrollHeight,behavior:"smooth"}),E.scrollTo({top:E.scrollHeight,behavior:"smooth"})});function s(){k(w,[],!0),k(c,[...t.boys],!0),k(l,{},!0),k(o,{},!0),k(_,!1),k(g,!0),a(!a()),t.boys.forEach(O=>e(l)[O]=0)}function u(){k(g,!1),k(_,!1),k(w,[],!0),a(!a()),k(o,{},!0)}function y(){if(k(f,!e(f)),e(c).length===0){k(_,!0),k(g,!1);return}if(Object.entries(e(o)).length===t.girls.length){k(_,!0),k(g,!1);return}k(v,e(c)[0],!0),k(d,t.boyPreferences[e(v)][e(l)[e(v)]],!0),e(l)[e(v)]++,m(`${e(v)} proposes to ${e(d)}.`),mt(e(v),e(d));const O=e(o)[e(d)];if(!O)e(o)[e(d)]=e(v),e(c).shift(),we("tentative",[e(v),e(d)]),m(`${e(d)} accepts ${e(v)}'s proposal.`);else{const B=t.girlPreferences[e(d)];B.indexOf(e(v))<B.indexOf(O)?(m(`${e(d)} dumps ${O} for ${e(v)}!`),e(o)[e(d)]=e(v),e(c)[0]=O,we("replaced",[O]),we("tentative",[e(v),e(d)])):(m(`${e(d)} rejects ${e(v)}.`),mt(e(d),e(v)),k(f,!e(f)),we("rejector",[e(d)]),we("rejected",[e(v)]))}}var S=Pr(),N=J(S),z=C(N),p=R(C(z),2);te(p,17,()=>e(w),oe,(O,B)=>{var ee=zr(),n=C(ee);dr(n,()=>e(B)),I(ee),T(O,ee)}),I(z),Ye(z,O=>b=O,()=>b),I(N);var x=R(N,2),M=C(x),P=R(C(M),2);te(P,17,()=>Object.entries(e(o)),oe,(O,B)=>{var ee=ge(()=>Re(e(B),2));let n=()=>e(ee)[0],h=()=>e(ee)[1];var A=Cr(),F=C(A);I(A),W(()=>se(F,`${n()??""} + ${h()??""}`)),T(O,A)}),I(M),Ye(M,O=>E=O,()=>E),I(x);var X=R(x,2),$=C(X),L=C($);{var j=O=>{var B=Rr();B.__click=s,T(O,B)};V(L,O=>{e(g)||O(j)})}var Q=R(L,2);{var U=O=>{var B=Nr();B.__click=y,T(O,B)};V(Q,O=>{e(g)&&!e(_)&&O(U)})}I($);var Z=R($,4);Z.__click=()=>{i(i().volume=.5-i().volume,!0)},I(X);var ve=R(X,2);{var fe=O=>{var B=Br(),ee=C(B),n=R(ee,2),h=C(n),A=C(h);te(A,17,()=>Object.entries(e(o)),oe,(G,Y,ce,Te)=>{var at=ge(()=>Re(e(Y),2));let Se=()=>e(at)[0],Ae=()=>e(at)[1];var st=be(),Ot=J(st);{var zt=he=>{var _e=$r(),De=C(_e);I(_e),W(()=>se(De,`${Se()??""} üíû ${Ae()??""}`)),T(he,_e)},Ct=he=>{var _e=Lr(),De=C(_e);I(_e),W(()=>se(De,`${Se()??""} ‚ù§Ô∏è ${Ae()??""}`)),T(he,_e)};V(Ot,he=>{t.girlPreferences[Se()][0]===Ae()&&Se()===t.boyPreferences[Ae()][0]?he(zt):he(Ct,!1)})}T(G,st)});var F=R(A,2);te(F,17,()=>t.girls.filter(G=>!Object.keys(e(o)).includes(G)),oe,(G,Y)=>{var ce=Mr(),Te=C(ce);I(ce),W(()=>se(Te,`${e(Y)??""} üòû`)),T(G,ce)});var ie=R(F,2);te(ie,17,()=>t.boys.filter(G=>!Object.values(e(o)).includes(G)),oe,(G,Y)=>{var ce=Dr(),Te=C(ce);I(ce),W(()=>se(Te,`${e(Y)??""} üòû`)),T(G,ce)}),I(h);var ne=R(h,2);ne.__click=u,I(n),I(B),W(()=>et(ee,"src",Or)),rt(3,B,()=>At),T(O,B)};V(ve,O=>{e(_)&&O(fe)})}T(r,S),Ie()}Ze(["click"]);const Hr=""+new URL("../assets/heart.Bpr07Mgz.gif",import.meta.url).href,Fr=""+new URL("../assets/crying.CHRd97a5.gif",import.meta.url).href,Ur=""+new URL("../assets/breakup.D_EuIFF7.gif",import.meta.url).href,Wr=""+new URL("../assets/rejected.DapKlnpD.gif",import.meta.url).href;var Gr=D('<img class="effect svelte-cps1d0" alt="gifs"/>');function Yr(r,t){xe(t,!0);let a=H(de([])),i=H(de({boys:{},girls:{}}));Ke.subscribe(v=>k(a,v,!0)),$e.subscribe(v=>k(i,v,!0));const c={tentative:Hr,replaced:Ur,rejector:Wr,rejected:Fr};var l=be(),o=J(l);te(o,17,()=>e(a),v=>v.id,(v,d)=>{var _=be(),g=J(_);{var w=b=>{var E=be(),f=J(E);te(f,17,()=>e(d).people,oe,(m,s)=>{var u=be(),y=J(u);{var S=N=>{const z=ge(()=>e(i).boys[e(s)]||e(i).girls[e(s)]);var p=Gr();W(()=>{et(p,"src",c[e(d).type]),Ne(p,`left:${e(z).left+20}px; top:${e(z).top+100}px;`)}),rt(7,p,()=>At,()=>({duration:800})),T(N,p)};V(y,N=>{(e(i).boys[e(s)]||e(i).girls[e(s)])&&N(S)})}T(m,u)}),T(b,E)};V(g,b=>{e(d).people&&b(w)})}T(v,_)}),T(r,l),Ie()}const qr=""+new URL("../assets/titanic.B2rvjAN8.mp3",import.meta.url).href;var Vr=D(`<div class="modal-overlay"><div class="modal-box"><h2>Welcome!</h2> <p>This simulation takes you through a dating strategy in which everyone is (mostly) satisfied with their final choice of partner. In particular, no two people mutually prefer eachother over the pairing that the strategy generates. Look up the <a href="https://en.wikipedia.org/wiki/Gale%E2%80%93Shapley_algorithm" target="_blank" style="color:blueviolet">Gale-Shapley algorithm</a> for more details. <br/><br/> Type in any names (comma-separated) in the input boxes provided, and hover over the candidates' lists to be able to customize their preference rankings. When you're done, click "Lock In Preferences" and then "Next Step" until all candidates are paired! Proposals, rejections, breakups, and current engagements are logged in the top-right corner.<br/><br/> XOXO</p> <p style="line-height: 1rem; font-size: .8rem"><b>Notes:</b> functionality may vary when you input duplicate names; adding a girl will shuffle all boys' lists (and vice versa); all controls but "Next Step" are disabled after you lock in your preferences, and they unlock when the algorithm terminates.</p> <button class="retro-btn exit">Close</button></div></div>`),Xr=D('<div class="warning">Warning: Duplicate names detected! No Polyamory Allowed!</div>'),Kr=D('<input class="list-input" placeholder="Enter names separated by commas"/>'),Jr=D('<div class="list-input"> </div>'),Qr=D('<input class="list-input" placeholder="Enter names separated by commas"/>'),Zr=D('<div class="list-input"> </div>'),ea=D('<div class="div1"><!></div>'),ta=D('<div class="div1"><!></div>'),ra=D('<button class="info-btn">Info</button> <button class="info-btn" style="top: 5.25rem; z-index: 900">Shuffle</button> <!> <!> <br/> <div class="list-input-wrapper">GIRLS: <!></div> <div class="list-input-wrapper">BOYS: <!></div> <br/><br/> <div class="boys"></div> <br/><br/> <div class="girls"></div> <br/><br/> <!> <!> <!>',1);function ca(r,t){xe(t,!1);const a=q(),i=q(),c=q();let l=q(),o=q(!1);pt(()=>{k(l,new Audio(qr)),re(l,e(l).loop=!0),re(l,e(l).volume=.5),e(l).play()});let v=q(!0);function d(){e(l)?.play(),k(v,!e(v))}function _(n){let h=n.length;for(;h!=0;){let A=Math.floor(Math.random()*h);h--,[n[h],n[A]]=[n[A],n[h]]}return n}function g(){if(!e(o)){for(let n of e(f))re(s,e(s)[n]=_(e(b).slice()));for(let n of e(b))re(u,e(u)[n]=_(e(f).slice()))}}function w(n,h){if(!n||!h||n.length!==h.length)return!1;const A=new Set(n),F=new Set(h);for(const ie of A)if(!F.has(ie))return!1;return!0}let b=q(["Alice","Bella","Cecilia","Daisy"]),E=q(e(b).join(",")),f=q(["Alex","Bob","Chris","Daniel"]),m=q(e(f).join(",")),s=q({}),u=q({});me(()=>e(E),()=>{k(b,e(E).split(",").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()))}),me(()=>e(m),()=>{k(f,e(m).split(",").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()))}),me(()=>(e(f),e(s),e(b)),()=>{for(let n of e(f))n&&!e(s)[n]?re(s,e(s)[n]=_(e(b).slice())):n&&!w(e(b),e(s)[n])&&re(s,e(s)[n]=_(e(b).slice()));for(let n of Object.keys(e(s)))e(f).includes(n)||delete e(s)[n],k(s,{...e(s)})}),me(()=>(e(b),e(u),e(f)),()=>{for(let n of e(b))n&&!e(u)[n]?re(u,e(u)[n]=_(e(f).slice())):n&&!w(e(f),e(u)[n])&&re(u,e(u)[n]=_(e(f).slice()));for(let n of Object.keys(e(u)))e(b).includes(n)||delete e(u)[n],k(u,{...e(u)})}),me(()=>e(b),()=>{k(a,e(b).filter((n,h,A)=>A.indexOf(n)!==h))}),me(()=>e(f),()=>{k(i,e(f).filter((n,h,A)=>A.indexOf(n)!==h))}),me(()=>(e(a),e(i)),()=>{k(c,e(a).length>0||e(i).length>0)}),vr(),Nt();var y=ra(),S=J(y);S.__click=d;var N=R(S,2);N.__click=g;var z=R(N,2);{var p=n=>{var h=Vr();h.__click=d;var A=C(h);A.__click=d;var F=R(C(A),6);F.__click=d,I(A),I(h),T(n,h)};V(z,n=>{e(v)&&n(p)})}var x=R(z,2);{var M=n=>{var h=Xr();T(n,h)};V(x,n=>{e(c)&&n(M)})}var P=R(x,4),X=R(C(P));{var $=n=>{var h=Kr();ft(h),ut(h,()=>e(E),A=>k(E,A)),T(n,h)},L=n=>{var h=Jr(),A=C(h,!0);I(h),W(()=>se(A,e(E))),T(n,h)};V(X,n=>{e(o)?n(L,!1):n($)})}I(P);var j=R(P,2),Q=R(C(j));{var U=n=>{var h=Qr();ft(h),ut(h,()=>e(m),A=>k(m,A)),T(n,h)},Z=n=>{var h=Zr(),A=C(h,!0);I(h),W(()=>se(A,e(m))),T(n,h)};V(Q,n=>{e(o)?n(Z,!1):n(U)})}I(j);var ve=R(j,5);te(ve,5,()=>(e(s),ue(()=>Object.entries(e(s)))),oe,(n,h)=>{var A=ge(()=>Re(e(h),2));let F=()=>e(A)[0],ie=()=>e(A)[1];var ne=ea(),G=C(ne);dt(G,{get size(){return ie(),ue(()=>ie().length)},get name(){return F()},group:"boys",get pref(){return e(s)[F()]},set pref(Y){re(s,e(s)[F()]=Y)},get lockedIn(){return e(o)},set lockedIn(Y){k(o,Y)},$$legacy:!0}),I(ne),T(n,ne)}),I(ve);var fe=R(ve,5);te(fe,5,()=>(e(u),ue(()=>Object.entries(e(u)))),oe,(n,h)=>{var A=ge(()=>Re(e(h),2));let F=()=>e(A)[0],ie=()=>e(A)[1];var ne=ta(),G=C(ne);dt(G,{get size(){return ie(),ue(()=>ie().length)},get name(){return F()},group:"girls",get pref(){return e(u)[F()]},set pref(Y){re(u,e(u)[F()]=Y)},get lockedIn(){return e(o)},set lockedIn(Y){k(o,Y)},$$legacy:!0}),I(ne),T(n,ne)}),I(fe);var O=R(fe,5);Ar(O,{});var B=R(O,2);Yr(B,{});var ee=R(B,2);jr(ee,{get boyPreferences(){return e(s)},get girlPreferences(){return e(u)},get boys(){return e(f)},get girls(){return e(b)},get lockedIn(){return e(o)},set lockedIn(n){k(o,n)},get audio(){return e(l)},set audio(n){k(l,n)},$$legacy:!0}),W(()=>{Ne(ve,`grid-template-columns: repeat(${e(s),ue(()=>e(s).length)??""}, 1fr);`),Ne(fe,`grid-template-columns: repeat(${e(u),ue(()=>e(u).length)??""}, 1fr);`)}),T(r,y),Ie()}Ze(["click"]);export{ca as component};
